(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{507:function(s,t,e){"use strict";e.r(t);var a=e(2),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),e("p",[s._v("主要属性介绍：")]),s._v(" "),e("ul",[e("li",[s._v("name:包名称，必须少于 214 个字符，不能包含空格，只能包含小写字母、连字符"),e("code",[s._v("-")]),s._v("或下划线"),e("code",[s._v("_")]),s._v(",这是因为当软件包在 npm 上发布时，它会基于此属性获得自己的 URL。")]),s._v(" "),e("li",[s._v("main:引用时，指定默认位置。")]),s._v(" "),e("li",[s._v("private：设置 true 可以防止意外地发不到 npm")]),s._v(" "),e("li",[s._v("engines：设置了该包使用了哪个版本的 node")]),s._v(" "),e("li",[s._v("browserslist：用于告知要支持哪些浏览器")]),s._v(" "),e("li",[s._v("version:版本号"),e("code",[s._v("x.x.x")]),s._v("，这些数字的含义是，金修复缺陷的版本是补丁版本，引入向后兼容的更改的版本是次版本，具有重大更改的是主版本。")]),s._v(" "),e("li",[s._v("licennpmse：软件包的许可证")]),s._v(" "),e("li",[s._v("keywords：关键字，便于搜索用")])]),s._v(" "),e("h3",{attrs:{id:"package-json官方字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-json官方字段"}},[s._v("#")]),s._v(" package.json官方字段")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://link.segmentfault.com/?enc=lNTI2P2gpyZUsPwGoCoRCQ%3D%3D.oPIVEtDyA%2BHrFUojrGINjSBTpdF%2FcoIdfx%2Bhd6e3cDaoSLLu%2B38pCLvSs%2BvrLS%2Bt",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.npmjs.com/files/package.json"),e("OutboundLink")],1)]),s._v(" "),e("h3",{attrs:{id:"package-json非官方字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-json非官方字段"}},[s._v("#")]),s._v(" package.json非官方字段")]),s._v(" "),e("p",[s._v("https://segmentfault.com/a/1190000016365409")]),s._v(" "),e("h3",{attrs:{id:"软件包版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#软件包版本"}},[s._v("#")]),s._v(" 软件包版本")]),s._v(" "),e("p",[s._v("语法使用了 semver（语义版本控制），具有以下规则：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("~")]),s._v(": 如果写入的是 〜0.13.0，则只更新补丁版本：即 0.13.1 可以，但 0.14.0 不可以。")]),s._v(" "),e("li",[e("code",[s._v("^")]),s._v(": 如果写入的是 ^0.13.0，则要更新补丁版本和次版本：即 0.13.1、0.14.0、依此类推。")]),s._v(" "),e("li",[e("code",[s._v("*")]),s._v(": 如果写入的是 *，则表示接受所有的更新，包括主版本升级。")]),s._v(" "),e("li",[e("code",[s._v(">")]),s._v(": 接受高于指定版本的任何版本。")]),s._v(" "),e("li",[e("code",[s._v(">=")]),s._v(": 接受等于或高于指定版本的任何版本。")]),s._v(" "),e("li",[e("code",[s._v("<=")]),s._v(": 接受等于或低于指定版本的任何版本。")]),s._v(" "),e("li",[e("code",[s._v("<")]),s._v(": 接受低于指定版本的任何版本。")])]),s._v(" "),e("p",[s._v("还有其他规则：")]),s._v(" "),e("ul",[e("li",[s._v("无符号：仅接收指定的特定版本。")]),s._v(" "),e("li",[s._v("latest：使用可用的最新版本。")])]),s._v(" "),e("p",[s._v("还可以在范围内组合以上大部分内容，例如：1.0.0 || >=1.1.0 <1.2.0，即使用 1.0.0 或从 1.1.0 开始但低于 1.2.0 的版本。")]),s._v(" "),e("h2",{attrs:{id:"入口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#入口"}},[s._v("#")]),s._v(" 入口")]),s._v(" "),e("h3",{attrs:{id:"main"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#main"}},[s._v("#")]),s._v(" main")]),s._v(" "),e("p",[s._v("定义了 "),e("code",[s._v("npm")]),s._v(" 包的入口文件，browser 环境和 node 环境均可使用")]),s._v(" "),e("h4",{attrs:{id:"bin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bin"}},[s._v("#")]),s._v(" bin")]),s._v(" "),e("p",[s._v("指定包指令")]),s._v(" "),e("h3",{attrs:{id:"module"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[s._v("#")]),s._v(" module")]),s._v(" "),e("p",[s._v("非官方字段。定义 "),e("code",[s._v("npm")]),s._v(" 包的 ESM 规范的入口文件，browser 环境和 node 环境均可使用")]),s._v(" "),e("h3",{attrs:{id:"exports"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exports"}},[s._v("#")]),s._v(" exports")]),s._v(" "),e("p",[s._v('Node.js 12+ 支持它作为“main”的替代方案，可以支持定义子路径导出和条件导出，同时封装内部未导出的模块。路径必须使用"./"开头')]),s._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"exports"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"."')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"import"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist/mymodule.mjs"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),e("h3",{attrs:{id:"resolutions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resolutions"}},[s._v("#")]),s._v(" resolutions")]),s._v(" "),e("p",[s._v("强行指定某个包的依赖包版本")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"resolutions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo/bar"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// 这里的 key"foo/bar"表示foo的直接依赖bar，把版本区间重写成1.0.0。')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo/**/bar"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不是直接依赖时，可以使用这种写法")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bar"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所有依赖这个包都指向这个版本")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),e("h3",{attrs:{id:"browser"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#browser"}},[s._v("#")]),s._v(" browser")]),s._v(" "),e("p",[s._v("定义 "),e("code",[s._v("npm")]),s._v(" 包在 browser 环境下的入口文件")]),s._v(" "),e("h3",{attrs:{id:"优先级"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优先级"}},[s._v("#")]),s._v(" 优先级")]),s._v(" "),e("p",[e("strong",[e("code",[s._v("browser")]),s._v(" = "),e("code",[s._v("browser+mjs")]),s._v(" > "),e("code",[s._v("module")]),s._v(" > "),e("code",[s._v("browser+cjs")]),s._v(" > "),e("code",[s._v("main")])])]),s._v(" "),e("h3",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("npm")]),s._v(" 包导出的是 ESM 规范的包，使用 module")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("npm")]),s._v(" 包只在 web 端使用，并且严禁在 server 端使用，使用 browser。")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("npm")]),s._v(" 包只在 server 端使用，使用 main")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("npm")]),s._v(" 包在 web 端和  server 端都允许使用，使用 browser 和 main")]),s._v(" "),e("p",[s._v("其他更加复杂的情况，如"),e("code",[s._v("npm")]),s._v(" 包需要提供 commonJS 与 ESM 等多个规范的多个代码文件，请参考上述使用场景或流程图")]),s._v(" "),e("blockquote",[e("p",[s._v("参考：https://juejin.cn/post/6844903862977953806")])]),s._v(" "),e("h2",{attrs:{id:"files"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#files"}},[s._v("#")]),s._v(" files")]),s._v(" "),e("p",[s._v("files是一个文件数组，描述了将软件包作为依赖项安装时要包括的条目。如果在数组里面声明了一个文件夹，那也会包含文件夹中的文件。某些特殊文件和目录也被包括或排除在外，无论它们是否存在于文件数组中。")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("以下文件无论是否设置，总是包含：\n*   `package.json`\n*   `README`\n*   `CHANGES`/`CHANGELOG`/`HISTORY`\n*   `LICENSE`/`LICENCE`\n*   `NOTICE`\n*   The file in the “main” field\n\n以下文件总是被忽略：\n*   `.git`\n*   `CVS`\n*   `.svn`\n*   `.hg`\n*   `.lock-wscript`\n*   `.wafpickle-N`\n*   `.*.swp`\n*   `.DS_Store`\n*   `._*`\n*   `npm-debug.log`\n*   `.npmrc`\n*   `node_modules`\n*   `config.gypi`\n*   `*.orig`\n*   `package-lock.json`(use shrinkwrap instead)\n")])])]),e("h2",{attrs:{id:"dependencies"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[s._v("#")]),s._v(" dependencies")]),s._v(" "),e("h3",{attrs:{id:"git-urls-as-dependencies"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-urls-as-dependencies"}},[s._v("#")]),s._v(" Git URLs as Dependencies")]),s._v(" "),e("p",[s._v("Examples：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git+ssh://git@github.com:npm/cli.git#v1.0.27\ngit+ssh://git@github.com:npm/cli#semver:^5.0\ngit+https://isaacs@github.com/npm/cli.git\ngit://github.com/npm/cli.git#v1.0.27\n")])])]),e("p",[s._v("实例：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  ...\n  "dependencies": {\n    "remember-scroll": "git+ssh://git@github.com:fengxianqi/remember-scroll.git#v0.1.1",\n  },\n  "devDependencies": {\n    ...\n  }\n}\n')])])]),e("h2",{attrs:{id:"publishconfig"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#publishconfig"}},[s._v("#")]),s._v(" publishConfig")]),s._v(" "),e("p",[s._v("设置推送时候的地址："),e("code",[s._v('"publishConfig": { "registry": "https://registry.npmjs.com/"}')])]),s._v(" "),e("h2",{attrs:{id:"type-typing-非官方字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#type-typing-非官方字段"}},[s._v("#")]),s._v(" type, typing(非官方字段)")]),s._v(" "),e("p",[s._v("就像 "),e("code",[s._v("main")]),s._v(" 字段一样，定义一个针对 "),e("code",[s._v("TypeScript")]),s._v(" 的入口文件。指定该字段后，vscode会自动引入类型提示。")])])}),[],!1,null,null,null);t.default=r.exports}}]);