(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{483:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("img",{attrs:{src:"https://blog-pic.oss-cn-beijing.aliyuncs.com/20191002121033.png",alt:"20191002121033.png"}})]),t._v(" "),s("h2",{attrs:{id:"cli-命令行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cli-命令行"}},[t._v("#")]),t._v(" cli(命令行)")]),t._v(" "),s("ol",[s("li",[t._v("--profile --progress 可以展示百分比进度")])]),t._v(" "),s("h2",{attrs:{id:"entry-入口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#entry-入口"}},[t._v("#")]),t._v(" entry(入口)")]),t._v(" "),s("p",[t._v("单入口：entry 是一个字符串")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" module.exports={\n    entry:'./path/file.js'\n }\n")])])]),s("p",[t._v("多入口：entry 是一个对象")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("module.exports={\n    entry:{\n        app:'./src/app.js',\n        adminApp:'./src/adminApp.js'\n    }\n}\n")])])]),s("h2",{attrs:{id:"output-输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#output-输出"}},[t._v("#")]),t._v(" output(输出)")]),t._v(" "),s("h3",{attrs:{id:"单入口配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单入口配置"}},[t._v("#")]),t._v(" 单入口配置")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("module.exports={\n    output:{\n        filename:'bundle.js',\n        path:_dirname+'/dist'\n    }\n}\n")])])]),s("h3",{attrs:{id:"多入口配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多入口配置"}},[t._v("#")]),t._v(" 多入口配置")]),t._v(" "),s("p",[t._v("通过占位符确保文件名称的唯一")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[name].js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在webpack5中，此设置是默认的")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" _dirname "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dist"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"loaders"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loaders"}},[t._v("#")]),t._v(" loaders")]),t._v(" "),s("p",[t._v("webpack 开箱即用只支持 JS 和 JSON 两种文件类型，通过 Loaders 去支持其他文件类型并且把它们转化成有效的模块，并且可以添加到依赖图中。"),s("br"),t._v("\n本身是一个函数，接受源文件作为参数，返回转换的结果。 test 对应匹配规则，use 匹配 loader")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\\\.css$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [style-loader](/loaders/style-loader)")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" loader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"style-loader"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [css-loader](/loaders/css-loader)")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            loader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              modules"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [sass-loader](/loaders/sass-loader)")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" loader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sass-loader"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[s("p",[t._v("使用 loader 的 3 种方式：")]),t._v(" "),s("ul",[s("li",[t._v("config 文件")]),t._v(" "),s("li",[t._v("inline，例:"),s("code",[t._v("require('raw'!../file.js)")]),t._v(" "),s("ul",[s("li",[t._v("内联 loader 的配置，例如"),s("code",[t._v("?key=value&foo=bar")]),t._v(",或者一个 json 对象，例如"),s("code",[t._v('?{"key":"value","foo":"bar"}')])]),t._v(" "),s("li",[t._v("每个 loader 后边都要添加"),s("code",[t._v("!")]),t._v("来进行分隔。每个部分都会相对于当前目录解析。"),s("code",[t._v("import Styles from 'style-loader!css-loader?modules!./styles.css';")])]),t._v(" "),s("li",[t._v("使用"),s("code",[t._v("!")]),t._v("作为内联 import 语句的前缀，将禁用所有已配置的 normal loader(普通 loader)")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("!!")]),t._v(" 前缀，将禁用所有已配置的 loader（preLoader, loader, postLoader）")])])]),t._v(" "),s("li",[t._v("CLI")])])]),t._v(" "),s("li",[s("p",[t._v("loader 执行顺序：")]),t._v(" "),s("ol",[s("li",[t._v("webpack 配置文件中 loaders 配置项\n"),s("ul",[s("li",[t._v("use 中的 loader 从下到上地取值/执行")])])]),t._v(" "),s("li",[t._v("代码文件中 request 或者 import 请求中指定的 loaders")])])])]),t._v(" "),s("h3",{attrs:{id:"url-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url-loader"}},[t._v("#")]),t._v(" url-loader")]),t._v(" "),s("p",[s("code",[t._v("url-loader")]),t._v("可以解析"),s("code",[t._v("import")]),t._v("或者"),s("code",[t._v("require")]),t._v("的文件，大于限制的文件可以转换成"),s("code",[t._v("base64 URIs")]),t._v("。"),s("br"),t._v("\nurl-loader 工作分两种情况：1.文件大小小于 limit 参数，url-loader 将会把文件转为 DataURL；2.文件大小大于 limit，url-loader 会调用 file-loader 进行处理，参数也会直接传给 file-loader。因此我们只需要安装 url-loader 即可。")]),t._v(" "),s("p",[t._v("内联图片：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.(ico|jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2)(\\?.*)?$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          loader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"style-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#style-loader"}},[t._v("#")]),t._v(" style-loader")]),t._v(" "),s("p",[t._v("匹配所有 css 文件，内联到 html 中")]),t._v(" "),s("h3",{attrs:{id:"raw-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raw-loader"}},[t._v("#")]),t._v(" raw-loader")]),t._v(" "),s("blockquote",[s("p",[t._v("https://webpack.docschina.org/loaders/raw-loader/#root")])]),t._v(" "),s("p",[t._v("允许以字符串形式"),s("code",[t._v("import")]),t._v(",有两种使用方式：")]),t._v(" "),s("ul",[s("li",[t._v("全局设置：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.txt$/i")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            loader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"raw-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              esModule"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("单独使用：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" txt "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"raw-loader!./file.txt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("需要注意的是，如果被 import 的文件已经被其他 loader 加载，那么应该添加"),s("code",[t._v("!!")]),t._v("来禁用其他 loader：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" css "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"!!raw-loader!./file.txt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[t._v("#")]),t._v(" Plugins")]),t._v(" "),s("p",[t._v("插件用于 bundle 文件的优化，资源管理和环境变量注入。作用于整个构建过程")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("module.exports={\n    plugins:[new HtmlWebpackPlugin({template:'./src/index.html'})]\n}\n")])])]),s("h3",{attrs:{id:"html-webpack-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#html-webpack-plugin"}},[t._v("#")]),t._v(" html-webpack-plugin")]),t._v(" "),s("p",[t._v("压缩 html 文件，production mode 模式会删除所有注释")]),t._v(" "),s("h3",{attrs:{id:"html-inline-css-webpack-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#html-inline-css-webpack-plugin"}},[t._v("#")]),t._v(" html-inline-css-webpack-plugin")]),t._v(" "),s("p",[t._v("内联 css 插件，和 MiniCssExtractPlugin 一起使用时，应该使用"),s("code",[t._v("html-inline-css-webpack-plugin")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HTMLInlineCSSWebpackPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"html-inline-css-webpack-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MiniCssExtractPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      filename"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bundle.css"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HTMLInlineCSSWebpackPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.s?css/i")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("MiniCssExtractPlugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"html-webpack-inline-source-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#html-webpack-inline-source-plugin"}},[t._v("#")]),t._v(" html-webpack-inline-source-plugin")]),t._v(" "),s("p",[t._v("功能：内联 js 注意："),s("code",[t._v("html-webpack-inline-source-plugin")]),t._v("之前的版本有问题，至少使用"),s("code",[t._v("1.0.0-beta.2")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"html-webpack-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackInlineSourcePlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"html-webpack-inline-source-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      inlineSource"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".(js)$"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../src/index.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackInlineSourcePlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HtmlWebpackPlugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"html-webpack-externals-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#html-webpack-externals-plugin"}},[t._v("#")]),t._v(" html-webpack-externals-plugin")]),t._v(" "),s("p",[t._v("基础库分离（vue、react）,将基础包通过 cdn 引入，不打入 bundle 中")]),t._v(" "),s("h3",{attrs:{id:"defineplugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#defineplugin"}},[t._v("#")]),t._v(" DefinePlugin")]),t._v(" "),s("p",[t._v("注入全局变量")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PRODUCTION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VERSION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5fa3b9"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BROWSER_SUPPORTS_HTML5")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TWO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1+1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typeof window"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"object"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"mini-css-extract-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mini-css-extract-plugin"}},[t._v("#")]),t._v(" mini-css-extract-plugin")]),t._v(" "),s("p",[t._v("作用与 css 压缩")]),t._v(" "),s("h3",{attrs:{id:"css-minimizer-webpack-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#css-minimizer-webpack-plugin"}},[t._v("#")]),t._v(" css-minimizer-webpack-plugin")]),t._v(" "),s("blockquote",[s("p",[t._v("https://webpack.docschina.org/plugins/css-minimizer-webpack-plugin/#getting-started")])]),t._v(" "),s("p",[t._v("内部使用 cssnano 去优化 css。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CssMinimizerPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-minimizer-webpack-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  optimization"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    minimize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    minimizer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CssMinimizerPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        minimizerOptions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          preset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              discardComments"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" removeAll"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"过时的-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#过时的-plugin"}},[t._v("#")]),t._v(" 过时的 plugin")]),t._v(" "),s("ul",[s("li",[t._v("CommonsChunkPlugin（removed in webpack4）")]),t._v(" "),s("li",[t._v("optimize-css-assets-webpack-plugin")]),t._v(" "),s("li",[t._v("extract-text-webpack-plugin")])]),t._v(" "),s("h2",{attrs:{id:"module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[t._v("#")]),t._v(" module")]),t._v(" "),s("p",[t._v("指定当前的构建环境是：production、development 还是 none(什么都不做), 设置 mode 可以使用 webpack 内置的函数，默认值为 production "),s("img",{attrs:{src:"https://blog-pic.oss-cn-beijing.aliyuncs.com/20190911173248.png",alt:"20190911173248.png"}})]),t._v(" "),s("h2",{attrs:{id:"optimization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#optimization"}},[t._v("#")]),t._v(" optimization")]),t._v(" "),s("p",[t._v("在 webpack4 中如果配置了该属性，会导致覆盖默认优化配置。")]),t._v(" "),s("h2",{attrs:{id:"devserver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#devserver"}},[t._v("#")]),t._v(" devServer")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("devServer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    inline"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    open"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动dev服务自动打开页面")]),t._v("\n    hot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 热更新")]),t._v("\n    host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置外部可以通过IP访问")]),t._v("\n    useLocalIp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置webpack使用ip打开页面")]),t._v("\n    stats"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"errors-only"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("h2",{attrs:{id:"热更新-webpack-dev-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热更新-webpack-dev-server"}},[t._v("#")]),t._v(" 热更新：webpack-dev-server")]),t._v(" "),s("p",[t._v("WDS 不刷新浏览器"),s("br"),t._v("\nWDS 不输出文件，而是放在内存中"),s("br"),t._v("\n使用的是 HotModuleReplacementPlugin 插件，设置 hot:true 之后会自动引用，不需要在 plugin 中添加")]),t._v(" "),s("h2",{attrs:{id:"文件指纹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件指纹"}},[t._v("#")]),t._v(" 文件指纹")]),t._v(" "),s("p",[t._v("文件指纹就是打包后输出的文件名的后缀"),s("br"),t._v("\nHash:和整个项目的构建相关，只要项目文件有修改，整个项目构建的 hash 值就会修改"),s("br"),t._v("\nChunkhash:和 webpack 打包的 chunk 有关，不同的 entry 会生成不同的 chunkhash 值"),s("br"),t._v("\ncontenthash:根据文件内容来定义 hash，文件内容不变，则 contenthash 不变"),s("br"),t._v("\n推荐使用 contenthash")]),t._v(" "),s("h2",{attrs:{id:"常用配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用配置"}},[t._v("#")]),t._v(" 常用配置")]),t._v(" "),s("h3",{attrs:{id:"html"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#html"}},[t._v("#")]),t._v(" HTML")]),t._v(" "),s("blockquote",[s("p",[t._v("只介绍使用的 plugin 和 loader，详情查看具体 plugin 和 loader")])]),t._v(" "),s("ul",[s("li",[t._v("压缩:"),s("a",{attrs:{href:"#html-webpack-plugin"}},[t._v("html-webpack-plugin")])]),t._v(" "),s("li",[t._v("删除注释:"),s("a",{attrs:{href:"#html-webpack-plugin"}},[t._v("html-webpack-plugin")])])]),t._v(" "),s("h3",{attrs:{id:"js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js"}},[t._v("#")]),t._v(" JS")]),t._v(" "),s("ul",[s("li",[t._v("压缩："),s("a",{attrs:{href:"uglifyjs-webpack-plugin"}},[t._v("uglifyjs-webpack-plugin")])]),t._v(" "),s("li",[t._v("内联："),s("a",{attrs:{href:"#html-webpack-inline-source-plugin"}},[t._v("html-webpack-inline-source-plugin")])]),t._v(" "),s("li",[t._v("第三方库分离："),s("a",{attrs:{href:"#html-webpack-externals-plugin"}},[t._v("html-webpack-externals-plugin")])]),t._v(" "),s("li",[t._v("公共包抽离：公共脚本分离（例：utils 中的工具）利用 webpack 内置的 "),s("a",{attrs:{href:"https://webpack.docschina.org/plugins/split-chunks-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("optimization.splitChunks"),s("OutboundLink")],1),t._v(" 进行公共脚本分离")])]),t._v(" "),s("h3",{attrs:{id:"css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#css"}},[t._v("#")]),t._v(" CSS")]),t._v(" "),s("ul",[s("li",[t._v("js 中提取："),s("a",{attrs:{href:"#mini-css-extract-plugin"}},[t._v("mini-css-extract-plugin")])]),t._v(" "),s("li",[t._v("压缩:"),s("a",{attrs:{href:"#css-minimizer-webpack-plugin"}},[t._v("css-minimizer-webpack-plugin")])]),t._v(" "),s("li",[t._v("内联：\n"),s("ul",[s("li",[s("a",{attrs:{href:"#style-loader"}},[t._v("style-loader")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#html-inline-css-webpack-plugin"}},[t._v("html-inline-css-webpack-plugin")])])])])]),t._v(" "),s("h3",{attrs:{id:"file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#file"}},[t._v("#")]),t._v(" file")]),t._v(" "),s("ul",[s("li",[t._v("内联："),s("a",{attrs:{href:"#url-loader"}},[t._v("url-loader")])]),t._v(" "),s("li",[t._v("字符串形式导入："),s("a",{attrs:{href:"#raw-loader"}},[t._v("raw-loader")])])]),t._v(" "),s("h2",{attrs:{id:"资源内联"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#资源内联"}},[t._v("#")]),t._v(" 资源内联")]),t._v(" "),s("p",[t._v("使用场景：")]),t._v(" "),s("ol",[s("li",[t._v("页面初始化需要做的的初始化脚本")]),t._v(" "),s("li",[t._v("css 内联避免页面闪动")]),t._v(" "),s("li",[t._v("减少网络请求（小图片或者字体内联）")])]),t._v(" "),s("h2",{attrs:{id:"多页面打包通用方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多页面打包通用方案"}},[t._v("#")]),t._v(" 多页面打包通用方案")]),t._v(" "),s("p",[t._v("动态获取 entry 和设置 html-webpack-plugin 数量"),s("br"),t._v("\n利用 glob.sync")]),t._v(" "),s("h2",{attrs:{id:"tree-shaking-摇树优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking-摇树优化"}},[t._v("#")]),t._v(" tree shaking(摇树优化)")]),t._v(" "),s("ol",[s("li",[t._v("tree shaking 只能作用于 ES6 模块,Babel 的预置默认把任何模块转译成 CommonJS 模块,你可以简单设置 modules: false 来解决此问题。")]),t._v(" "),s("li",[t._v("production mode 的情况下默认开启")]),t._v(" "),s("li",[t._v("在具有副作用的代码中 tree-shaking 会失效，可以使用 webpack-deep-scope-plugin 插件来优化，但是如果使用了 babel+代码具有副作用的情况下，这个插件还是会失效")]),t._v(" "),s("li",[t._v("webpack5 对 tree shaking 进行了进一步的优化，比如嵌套 tree-shaking,会对嵌套的 export 进行追踪，在生产模式下，默认启动"),s("code",[t._v("optimization.innerGraph")]),t._v("对 import 和 export 的依赖进行分析，这样会检测出未使用的 export，从而省略更多打包的代码。更多 tree-shaking 优化可以查看"),s("code",[t._v("sideEffects和usedExports")])])]),t._v(" "),s("h2",{attrs:{id:"scope-hoisting-打包后代码的优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scope-hoisting-打包后代码的优化"}},[t._v("#")]),t._v(" scope hoisting(打包后代码的优化)")]),t._v(" "),s("blockquote",[s("p",[t._v("production 模式默认开启")])]),t._v(" "),s("p",[t._v("打包后有大量函数闭包包裹代码，导致体积增大，运行代码时创建的函数作用域变多，内存开销变大。 import 会被转换成__webopack_require"),s("br"),t._v("\n通过 scope hoisting 插件可以解决这个问题，webpack mode 为 production 时默认开启，必须是 ES6 语法")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("plugins:[\n    new webpack.optimize.ModuleConcatenationPlugin()\n]\n")])])]),s("h2",{attrs:{id:"动态分割和动态-import"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动态分割和动态-import"}},[t._v("#")]),t._v(" 动态分割和动态 import")]),t._v(" "),s("p",[t._v("适用场景：")]),t._v(" "),s("ol",[s("li",[t._v("抽离相同代码到一个共享块")]),t._v(" "),s("li",[t._v("脚本懒加载，使用初始下载的代码更小（首屏优化）懒加载 js 脚本的方式：")]),t._v(" "),s("li",[t._v("conmmonJS:require.ensure")]),t._v(" "),s("li",[t._v("ES6:动态 import(目前还没有原生支持，需要 babel 转换)"),s("br"),t._v("\n如何使用动态 import?")]),t._v(" "),s("li",[t._v("安装 babel 插件")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm i @babel/plugin-syntax-dynamic-import --save-dev\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("配置.babelrc 文件")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('    "plugin":["@babel/plugin-syntax-dynamic-import"]\n')])])]),s("h2",{attrs:{id:"打包组件库和基础库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包组件库和基础库"}},[t._v("#")]),t._v(" 打包组件库和基础库")]),t._v(" "),s("ol",[s("li",[t._v("在生成开发版文件和 min 版文件时，配置 mode:'none'来避免打包后文件都为压缩状态的情况")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" TerserPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"terser-webpack-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"none"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  entry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"large-number"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/index.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 测试环境代码")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"large-number.min"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/index.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 线上环境代码")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[name].js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在webpack5中，此设置是默认的")]),t._v("\n    library"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"largeNumber"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    libraryTarget"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"umd"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用于多环境引入")]),t._v("\n    libraryExport"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 去除引用时额外的.default")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  optimization"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    minimize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    minimizer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TerserPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TerserPlugin插件支持压缩ES6代码")]),t._v("\n        include"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.min\\.js$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 匹配只压缩.min.js文件")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"构建日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建日志"}},[t._v("#")]),t._v(" 构建日志")]),t._v(" "),s("h3",{attrs:{id:"统计信息-stats"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#统计信息-stats"}},[t._v("#")]),t._v(" 统计信息 stats")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Preset")]),t._v(" "),s("th",[t._v("Alternative")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("'errors-only'")]),t._v(" "),s("td",[t._v("none")]),t._v(" "),s("td",[t._v("只在发生错误时输出")])]),t._v(" "),s("tr",[s("td",[t._v("minimal")]),t._v(" "),s("td",[t._v("none")]),t._v(" "),s("td",[t._v("只在发生错误或有新的编译时输出")])]),t._v(" "),s("tr",[s("td",[t._v("none")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("没有输出")])]),t._v(" "),s("tr",[s("td",[t._v("normal")]),t._v(" "),s("td",[t._v("true")]),t._v(" "),s("td",[t._v("标准输出")])]),t._v(" "),s("tr",[s("td",[t._v("verbose")]),t._v(" "),s("td",[t._v("none")]),t._v(" "),s("td",[t._v("全部输出")])])])]),t._v(" "),s("p",[t._v("生产环境配置")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("module.exports = {\n    stats:'errors-only'   // 推荐\n}\n")])])]),s("p",[t._v("开发环境配置")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("devServer: {\n    contentBase: './dist',\n    hot: true,\n    stats: 'errors-only',\n    host:'0.0.0.0' // 默认webpack开发服务外部无法访问，设置host后可以通过ip访问\n},\n")])])]),s("p",[t._v("优化命令行的构建日志，使用"),s("code",[t._v("friendly-errors-webpack-plugin")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("plugins:[\n    new FriendlyErrorsWebpackPlugin()\n],\nstats:'errors-only'  // 需要搭配这条命令使用\n")])])]),s("h2",{attrs:{id:"构建配置管理的可选方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建配置管理的可选方案"}},[t._v("#")]),t._v(" 构建配置管理的可选方案")]),t._v(" "),s("ol",[s("li",[t._v("通过多个配置文件管理不同环境的构建，webpack --config 参数进行控制")]),t._v(" "),s("li",[t._v("将构建配置设计成一个库")]),t._v(" "),s("li",[t._v("抽成一个工具进行管理，比如：create-react-app")]),t._v(" "),s("li",[t._v("将所有的配置放在一个文件，通过--env 参数控制分支选择")])]),t._v(" "),s("h2",{attrs:{id:"冒烟测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#冒烟测试"}},[t._v("#")]),t._v(" 冒烟测试")]),t._v(" "),s("ol",[s("li",[t._v("判断是否构建成功")]),t._v(" "),s("li",[t._v("检测是否有内容输出：")])]),t._v(" "),s("ul",[s("li",[t._v("是否有 js、css 等静态资源文件")]),t._v(" "),s("li",[t._v("是否有 HTML 文件")])]),t._v(" "),s("h2",{attrs:{id:"持续集成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#持续集成"}},[t._v("#")]),t._v(" 持续集成")]),t._v(" "),s("p",[t._v("优点：")]),t._v(" "),s("ul",[s("li",[t._v("快速发现错误")]),t._v(" "),s("li",[t._v("防止分支大幅偏离主干核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。"),s("br"),t._v("\n接入 Travis CI")])]),t._v(" "),s("ol",[s("li",[t._v("https://travis-ci.org/ 使用 gitHub 账号登录")]),t._v(" "),s("li",[t._v("在https://travis-ci.org/account/repositories 为项目开启")]),t._v(" "),s("li",[t._v("项目根目录下新增.travis.yml"),s("br"),t._v("\ntravis.yml 文件内容")])]),t._v(" "),s("ul",[s("li",[t._v("install 安装项目依赖")]),t._v(" "),s("li",[t._v("script 运行测试用例")])]),t._v(" "),s("h2",{attrs:{id:"编写好的构建包发布到-npm-上"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写好的构建包发布到-npm-上"}},[t._v("#")]),t._v(" 编写好的构建包发布到 npm 上")]),t._v(" "),s("p",[t._v("添加用户：npm adduser"),s("br"),t._v("\n升级版本")]),t._v(" "),s("ul",[s("li",[t._v("升级补丁版本号：npm version patch")]),t._v(" "),s("li",[t._v("升级小版本号：npm version minor")]),t._v(" "),s("li",[t._v("升级大版本号：npm version major"),s("br"),t._v("\n发布版本：npm publish")])]),t._v(" "),s("h2",{attrs:{id:"git-规范和-changelog-生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-规范和-changelog-生成"}},[t._v("#")]),t._v(" git 规范和 Changelog 生成")]),t._v(" "),s("p",[t._v("良好的 Git commit 规范优势：")]),t._v(" "),s("ul",[s("li",[t._v("加快 Code Review 的流程")]),t._v(" "),s("li",[t._v("根据 Git Commit 的元数据生成 Changelog")]),t._v(" "),s("li",[t._v("后续维护者可以知道 Feature 被修改的原因")])]),t._v(" "),s("p",[t._v("技术方案"),s("br"),t._v(" "),s("img",{attrs:{src:"https://blog-pic.oss-cn-beijing.aliyuncs.com/20191004115054.png",alt:"20191004115054.png"}}),s("br"),t._v("\n提交格式要求")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<type>(<scope>): <subject>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n")])])]),s("p",[t._v("type 代表某次提交的类型，比如是修复一个 bug 还是增加一个新的 feature.所有的 type 类型如下:")]),t._v(" "),s("ul",[s("li",[t._v("build:主要目的是修改项目构建系统(例如 glup，webpack，rollup 的配置等)的提交")]),t._v(" "),s("li",[t._v("ci:主要目的是修改项目继续集成流程(例如 Travis，Jenkins，GitLab CI，Circle 等)的提交,")]),t._v(" "),s("li",[t._v("docs:仅仅修改了文档，比如 README,CHANGELOG,CONTRIBUTE 等等")]),t._v(" "),s("li",[t._v("feat:新增 feature")]),t._v(" "),s("li",[t._v("fix:修复 bug")]),t._v(" "),s("li",[t._v("pref:优化相关，比如提升性能、体验")]),t._v(" "),s("li",[t._v("refactor:代码重构，没有加新功能或者修复 bug")]),t._v(" "),s("li",[t._v("revert:回滚到上一个版本")]),t._v(" "),s("li",[t._v("style:仅仅修改了空格、格式缩进、逗号等等，不改变代码逻辑")]),t._v(" "),s("li",[t._v("test:测试用例，包括单元测试、集成测试等")]),t._v(" "),s("li",[t._v("chore:不属于以上类型的其他类型")])]),t._v(" "),s("p",[t._v("安装"),s("br"),t._v(" "),s("code",[t._v("npm install husky --save-dev")]),s("br"),t._v(" "),s("code",[t._v("npm install --save-dev @commitlint/{cli,config-conventional}")]),s("br"),t._v("\n配置 commitlint.config.js")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("module.exports = {extends: ['@commitlint/config-conventional']};\n")])])]),s("p",[t._v("配置 package.json")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n  "husky": {\n    "hooks": {\n      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"\n    }\n  }\n}\n')])])]),s("h2",{attrs:{id:"速度分析-使用-speed-measure-webpack-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#速度分析-使用-speed-measure-webpack-plugin"}},[t._v("#")]),t._v(" 速度分析：使用 speed-measure-webpack-plugin")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const SpeedMeasureWebpackPlugin = require('speed-measure-webpack-plugin');\nconst smp = new SpeedMeasureWebpackPlugin();\nmodule.exports = smp.wrap({   // 用smp.wrap包裹配置文件\n\n})\n")])])]),s("h2",{attrs:{id:"体积分析-使用-webpack-bundle-analyzer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#体积分析-使用-webpack-bundle-analyzer"}},[t._v("#")]),t._v(" 体积分析：使用 webpack-bundle-analyzer")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const BundleAnalyzerPlugin=require('webpack-bundle-analyzer').BundleAnalyzerPlugin;\nmodule.exports={\n    plugin:[\n        new BundleAnalyzerPlugin()\n    ]\n}\n")])])]),s("p",[t._v("构建完成后会在 8888 端口展示")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/webpack-bundle-analyzer",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-bundle-analyzer"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"加快构建速度-升级-webpack-和-node-版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加快构建速度-升级-webpack-和-node-版本"}},[t._v("#")]),t._v(" 加快构建速度：升级 webpack 和 node 版本")]),t._v(" "),s("p",[t._v("使用 webpack4：优化原因"),s("br"),t._v("\nv8 带来的优化（for of 替代 forEach、Map 和 Set 替代 Object、includes 替代 indexOf）"),s("br"),t._v("\n默认使用更快的 md4 hash 算法"),s("br"),t._v("\nwepacks AST 可以直接从 loader 传递给 AST，减少解析时间"),s("br"),t._v("\n使用字符串方法替代正则表达式")]),t._v(" "),s("h2",{attrs:{id:"加快构建速度-多进程-多实例构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加快构建速度-多进程-多实例构建"}},[t._v("#")]),t._v(" 加快构建速度：多进程/多实例构建")]),t._v(" "),s("p",[t._v("使用 webpack 官方维护插件：thread-loader 解析资源"),s("br"),t._v("\n原理：每次 webpack 解析一个模块，thread-loader 会将它及它的依赖分配给 worker 线程中")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('npm install --save-dev thread-loader\n\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        include: path.resolve("src"),\n        use: [\n          "thread-loader",  // thread-loader要写在loader最前面\n          // your expensive loader (e.g babel-loader)\n        ]\n      }\n    ]\n  }\n}\n')])])]),s("h2",{attrs:{id:"加快构建速度-多进程-多实例并行压缩代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加快构建速度-多进程-多实例并行压缩代码"}},[t._v("#")]),t._v(" 加快构建速度：多进程/多实例并行压缩代码")]),t._v(" "),s("p",[t._v("使用 terser-webppack-plugin 开启 parallel 参数")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const TerserPlugin=require('terser-webpack-plugin');\nmodule.exports={\n    optimization:{\n        minimizer:[\n            new TerserPlugin({\n                parallel:4\n            })\n        ]\n    }\n}\n")])])]),s("h2",{attrs:{id:"加快构建速度-进一步分包-预编译资源模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加快构建速度-进一步分包-预编译资源模块"}},[t._v("#")]),t._v(" 加快构建速度：进一步分包-预编译资源模块")]),t._v(" "),s("p",[t._v("使用 html-webpack-externals-plugin 的缺点：每一个基础包都要引入并配置，splitchunk 也会再次解析")]),t._v(" "),s("p",[t._v("思路：将 reat\\react-dom\\redux\\react-redux 基础包和业务基础包打包成一个文件方法：使用 DLLPlugin 进行分包，DllReferencePlugin 对 manifest.json 引用"),s("br"),t._v("\n一般需要单独创建 webpack.dll.js 配置文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const path = require('path');\nconst webpack = require('webpack');\n\nmodule.exports = {\n    entry: {\n        library: [\n            'react',\n            'react-dom'\n        ]\n    },\n    output: {\n        filename: '[name]_[chunkhash].dll.js',\n        path: path.join(__dirname, 'build/library'),\n        library: '[name]'\n    },\n    plugins: [\n        new webpack.DllPlugin({\n            name: '[name]_[hash]',\n            path: path.join(__dirname, 'build/library/[name].json')\n        })\n    ]\n};\n")])])]),s("p",[t._v("在 webpack 中引用")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("module.exports={\n    plugins:[\n        new webpack.DllReferencePlugin({\n            manifest:require('./build/library/manifest.json')\n        })\n    ]\n}\n")])])]),s("blockquote",[s("p",[t._v("在 webpack4 中性能方面提升不大，但在分包作用中还是有用的")])]),t._v(" "),s("h2",{attrs:{id:"加快构建速度-缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加快构建速度-缓存"}},[t._v("#")]),t._v(" 加快构建速度：缓存")]),t._v(" "),s("p",[t._v("目的：提升二次构建速度"),s("br"),t._v("\n缓存思路：")]),t._v(" "),s("ul",[s("li",[t._v("babel-loader 开启缓存")]),t._v(" "),s("li",[t._v("terser-webpack-plugin 开启缓存")]),t._v(" "),s("li",[t._v("使用 cache-loader 或者 hard-source-webpack-plugin(推荐 hard-source-webpack-plugin，配置更简单)")])]),t._v(" "),s("h2",{attrs:{id:"加快构建速度-缩小构建目标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加快构建速度-缩小构建目标"}},[t._v("#")]),t._v(" 加快构建速度：缩小构建目标")]),t._v(" "),s("p",[t._v("目的：尽可能的少构建模块"),s("br"),t._v("\n比如：babel-loader 不解析 node_modules （各种 exclude 和 include）减少文件搜索范围")]),t._v(" "),s("ul",[s("li",[t._v("优化 resolve.modules 配置（减少模块搜索层级）")]),t._v(" "),s("li",[t._v("优化 resolve.mainFields 配置")]),t._v(" "),s("li",[t._v("优化 resolve.extensions 配置")]),t._v(" "),s("li",[t._v("合理使用 alias")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("modules.exports={\n    resolve:{\n        alias:{\n            react:path.resolve(__dirname,'./node_modules/react/dist/react.min.js'),\n        },\n        modules:[path.resolve(__dirname,'node_modules')],\n        extensions:['.js'],\n        mainFields:['main']\n    }\n}\n")])])]),s("h2",{attrs:{id:"treeshaking-删除无用的-js-和-css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#treeshaking-删除无用的-js-和-css"}},[t._v("#")]),t._v(" treeshaking-删除无用的 js 和 css")]),t._v(" "),s("p",[t._v("无用的 CSS 如何删除掉？"),s("br"),t._v("\nPurifyCSS:遍历代码，识别已经用到的 CSS class"),s("br"),t._v("\nuncss:HTML 需要通过 jsdom 加载，所有的样式通过 PostCSS 解析，通过 document.querySelector 来识别在 html 文件里面不存在的选择器在 webpack 中如何使用 PurifyCSS?"),s("br"),t._v("\nPurifyCSS-webpack-plugin 不再维护所以使用："),s("br"),t._v("\npurgecss-webpack-plugin+mini-css-extract-plugin 配合使用")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const PurgecssPlugin = require('purgecss-webpack-plugin');\nconst PATHS={\n    src:path.join(__dirname,'src')\n}\n\n    plugins:[\n        new PurgecssPlugin({\n            paths:glob.sync(`${PATHS.src}/**/*`,nodir:true) // 插件要求路径必须是绝对路径\n        })\n    ]\n")])])]),s("h2",{attrs:{id:"图片压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片压缩"}},[t._v("#")]),t._v(" 图片压缩")]),t._v(" "),s("p",[t._v("使用 image-webpack-loader"),s("br"),t._v("\nImagemin 的优点分析")]),t._v(" "),s("ul",[s("li",[t._v("有很多定制选项")]),t._v(" "),s("li",[t._v("可以引入更多第三方优化插件，例如 pngquant")]),t._v(" "),s("li",[t._v("可以处理多种图片格式")])]),t._v(" "),s("p",[t._v("Imagemin 的压缩原理"),s("br"),t._v("\npngquant:是一款 PNG 压缩器，通过将图像转换为具有 alpha 通道（通常比 24/32 位 PNG 文件小 60-80%）的更高效的 8 位 PNG 格式，可显著减少文件大小。"),s("br"),t._v("\npngcrush: 其主要目的是通过尝试不同的压缩级别和 PNG 过滤方法来降低 PNG IDAT 数据流的大小。"),s("br"),t._v("\noptipng:其设计灵感来自于 pngcrush。optipng 可将图像文件重新压缩为更小尺寸，而不会丢失任何信息。 tinypng:也是将 24 位 png 文件转化为更小有索引的 8 位图片,同时所有非必要的 metadata 也会被剥离掉")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm i image-webpack-loader -D\n\nrules: [{\n  test: /\\.(gif|png|jpe?g|svg)$/i,\n  use: [\n    'file-loader',\n    {\n      loader: 'image-webpack-loader',\n      options: {\n        mozjpeg: {\n          progressive: true,\n          quality: 65\n        },\n        // optipng.enabled: false will disable optipng\n        optipng: {\n          enabled: false,\n        },\n        pngquant: {\n          quality: [0.65, 0.90],\n          speed: 4\n        },\n        gifsicle: {\n          interlaced: false,\n        },\n        // the webp option will enable WEBP\n        webp: {\n          quality: 75\n        }\n      }\n    },\n  ],\n}]\n")])])]),s("h2",{attrs:{id:"构建体积优化-动态-polyfill"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建体积优化-动态-polyfill"}},[t._v("#")]),t._v(" 构建体积优化：动态 polyfill")]),t._v(" "),s("p",[t._v("使用 Polyfill Service"),s("br"),t._v("\n原理：识别 User Agent,下发不同的 Polyfill 通过插入"),s("code",[t._v("https://polyfill.io/v3/polyfill.min.js")]),t._v("来实现动态 polyfill"),s("br"),t._v("\n国内可以使用阿里的服务"),s("code",[t._v("http://polyfill.alicdn.com/polyfill.min.js")]),t._v(",速度更快使用方法：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://polyfill.io/v3/polyfill.min.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),s("h3",{attrs:{id:"px-自动转换成-rem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#px-自动转换成-rem"}},[t._v("#")]),t._v(" px 自动转换成 rem")]),t._v(" "),s("p",[t._v("需要在 html 文件中内联引入 lib-flexible，一起使用，可以添加 exclude 去掉不想转换的库，也可以添加/"),s("em",[t._v("no")]),t._v("/的语法去设置某一行样式不进行转换")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{\n    loader: 'px2rem-loader',\n    options: {\n        remUnit: 75,   // 如果是750的设计稿\n        remPrecision: 8\n    }\n}\n")])])]),s("h3",{attrs:{id:"将-px-单位转换为视口单位的-vw-vh-vmin-vmax-的-postcss-插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将-px-单位转换为视口单位的-vw-vh-vmin-vmax-的-postcss-插件"}},[t._v("#")]),t._v(" 将 px 单位转换为视口单位的 (vw, vh, vmin, vmax) 的 PostCSS 插件.")]),t._v(" "),s("p",[t._v("安装："),s("code",[t._v("npm install postcss-px-to-viewport --save-dev")]),t._v(" 使用方法，配置"),s("code",[t._v("postcss.config.js")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('"plugins": {\n    "postcss-px-to-viewport": {\n    viewportWidth: 750,  //视窗的宽度，对应的是我们设计稿的宽度，一般是750\n    viewportHeight: 1334, // 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置\n    unitPrecision: 3,       // 指定`px`转换为视窗单位值的小数位数（很多时候无法整除）\n    viewportUnit: ‘vw‘,     // 指定需要转换成的视窗单位，建议使用vw\n    selectorBlackList: [‘.ignore‘, ‘.hairlines‘],  // 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名\n    minPixelValue: 1,       // 小于或等于`1px`不转换为视窗单位，你也可以设置为你想要的值\n    mediaQuery: false       // 允许在媒体查询中转换`px`\n    },\n  }\n')])])]),s("h3",{attrs:{id:"自动添加-css-前缀"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自动添加-css-前缀"}},[t._v("#")]),t._v(" 自动添加 css 前缀")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{\n    loader: 'postcss-loader',\n    options: {\n        plugins: () => [\n            require('autoprefixer')({\n                browsers: ['last 2 version', '>1%', 'ios 7']\n            })\n        ]\n    }\n")])])]),s("h3",{attrs:{id:"自动清除构建目录产物"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自动清除构建目录产物"}},[t._v("#")]),t._v(" 自动清除构建目录产物")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const CleanWebpackPlugin = require('clean-webpack-plugin');\nplugins: [\n        new webpack.HotModuleReplacementPlugin(),\n        new CleanWebpackPlugin(),\n        new FriendlyErrorsWebpackPlugin()\n    ].concat(htmlWebpackPlugins)\n")])])]),s("h3",{attrs:{id:"文件监听"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件监听"}},[t._v("#")]),t._v(" 文件监听")]),t._v(" "),s("p",[t._v("webpack 开启监听模式有两种方式：")]),t._v(" "),s("ul",[s("li",[t._v("启动 webpack 命令时，带上 --watch 参数")]),t._v(" "),s("li",[t._v("再配置 webpack.config.js 中设置 watch:true")])]),t._v(" "),s("p",[t._v("文件监听的原理分析：轮询判断文件的最后编辑时间是否变化某个文件发生了变化，并不会立刻告诉监听者，而是先缓存起来，等 aggregateTimeout")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("export "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认false,")]),t._v("\n  watch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只有开启监听模式时，watchOptions才有意义")]),t._v("\n  watchOptions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认为空，忽略文件夹，支持正则，支持数组")]),t._v("\n    ignored"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/node_modules/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听到变化发生后会等300ms再去执行，默认300ms")]),t._v("\n    aggregateTimeout"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 轮询间隔，默认每秒检查一次变动")]),t._v("\n    poll"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"热更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[t._v("#")]),t._v(" 热更新")]),t._v(" "),s("p",[t._v("需要"),s("code",[t._v("webpack-dev-server")]),t._v(",配置 webpack 文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" devServer: {\n        hot: true\n }\n")])])]),s("h3",{attrs:{id:"devtool-分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#devtool-分类"}},[t._v("#")]),t._v(" devtool 分类")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://blog-pic.oss-cn-beijing.aliyuncs.com/webpack_2020-04-20-08-57-29.png",alt:"webpack_2020-04-20-08-57-29"}}),t._v(" "),s("strong",[t._v("这么多模式，到底使用哪个？")])]),t._v(" "),s("ol",[s("li",[t._v("开发环境推荐："),s("code",[t._v("cheap-module-eval-source-map")])]),t._v(" "),s("li",[t._v("生产环境推荐："),s("code",[t._v("cheap-module-source-map")])]),t._v(" "),s("li",[t._v("相关解释：")])]),t._v(" "),s("ul",[s("li",[t._v("大部分情况我们调试并不关心列信息，而且就算 sourcemap 没有列，有些浏览器引擎（例如 v8） 也会给出列信息，所以我们使用 cheap 模式可以大幅提高 souremap 生成的效率。")]),t._v(" "),s("li",[t._v("使用 module 可支持 babel 这种预编译工具（在 webpack 里做为 loader 使用）。")]),t._v(" "),s("li",[t._v("使用 eval 方式可大幅提高持续构建效率，参考 webapck devtool 速度对比列表，这对经常需要边改边调的前端开发而言非常重要")]),t._v(" "),s("li",[t._v("直接将 sourceMap 放入打包后的文件，会明显增大文件的大小，不利于静态文件的快速加载；而外联.map 时，.map 文件只会在 F12 开启时进行下载（sourceMap 主要服务于调试），故推荐使用外联.map 的形式。")])]),t._v(" "),s("h3",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/hhhyaaon/p/5657469.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("[webpack] devtool 配置对比"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"webpack-升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-升级"}},[t._v("#")]),t._v(" webpack 升级")]),t._v(" "),s("h3",{attrs:{id:"webpack-升级-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-升级-2"}},[t._v("#")]),t._v(" webpack 升级")]),t._v(" "),s("h3",{attrs:{id:"webpack-升级-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-升级-3"}},[t._v("#")]),t._v(" webpack 升级")]),t._v(" "),s("h2",{attrs:{id:"webpack-升级-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-升级-4"}},[t._v("#")]),t._v(" webpack 升级")]),t._v(" "),s("h3",{attrs:{id:"to-v5-from-v4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#to-v5-from-v4"}},[t._v("#")]),t._v(" to v5 from v4")]),t._v(" "),s("ul",[s("li",[t._v("cli 命令\n"),s("ol",[s("li",[t._v("不再支持"),s("code",[t._v("--colors")]),t._v("参数")])])]),t._v(" "),s("li",[t._v("运行时\n"),s("ol",[s("li",[t._v("webpack 5 不再引入 Node.js 变量的 polyfill，导致 process 未定义")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);