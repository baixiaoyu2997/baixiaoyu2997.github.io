(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{505:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),a("h3",{attrs:{id:"新增功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增功能"}},[t._v("#")]),t._v(" 新增功能")]),t._v(" "),a("ol",[a("li",[t._v("增量式更新（ISR）")]),t._v(" "),a("li",[a("code",[t._v("hybrid rendering")]),t._v("：为不同的路由提供不同的渲染模式 ，"),a("code",[t._v("client-side")]),t._v("或者"),a("code",[t._v("universal")])]),t._v(" "),a("li",[a("code",[t._v("edge-size rendering")])])]),t._v(" "),a("h3",{attrs:{id:"通用渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通用渲染"}},[t._v("#")]),t._v(" 通用渲染")]),t._v(" "),a("p",[a("code",[t._v("Universal Rendering")]),t._v("，相当于是"),a("code",[t._v("client-side")]),t._v("和"),a("code",[t._v("server-side")]),t._v("的结合，在服务端直出页面的基础上，能保证浏览器后台处理js执行，来达到单页跳转效果，减少服务器调用。这一过程称为"),a("code",[t._v("Hydration")])]),t._v(" "),a("h3",{attrs:{id:"hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[t._v("#")]),t._v(" hooks")]),t._v(" "),a("p",[t._v("nuxt通过hook系统来提供强大的扩展能力，支持的hook包括：https://github.com/nuxt/framework/blob/a0c4d6e7e32f490d6f375340bffdc1d3b68a42eb/packages/schema/src/types/hooks.ts#L62")]),t._v(" "),a("p",[t._v("除了"),a("code",[t._v("nuxt hooks")]),t._v("还有"),a("a",{attrs:{href:"https://github.com/nuxt/framework/blob/a0c4d6e7e32f490d6f375340bffdc1d3b68a42eb/packages/nuxt3/src/app/nuxt.ts#L18",target:"_blank",rel:"noopener noreferrer"}},[t._v("runtime hooks"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("app:created\tvueApp\tWhen initial vueApp instance is created\napp:beforeMount\tvueApp\tSame as app:created\napp:mounted\tvueApp\tWhen Vue app is initialized and mounted in browser\napp:rendered\t-\tWhen SSR rendering is done\napp:suspense:resolve\tappComponent\tOn Suspense resolved event\npage:start\tpageComponent\tOn Suspense pending event\npage:finish\tpageComponent\tOn Suspense resolved event\nmeta:register\tmetaRenderers\t(internal)\nvue:setup\t-\t(internal)\nvue:error\n")])])]),a("h2",{attrs:{id:"数据获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据获取"}},[t._v("#")]),t._v(" 数据获取")]),t._v(" "),a("h3",{attrs:{id:"useasyncdata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useasyncdata"}},[t._v("#")]),t._v(" useAsyncData")]),t._v(" "),a("p",[t._v("支持页面、组件、plugin在服务器端获取异步数据：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useAsyncData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" lazy"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("参数：")]),t._v(" "),a("ol",[a("li",[t._v("key：唯一key，确保获取正确的数据")]),t._v(" "),a("li",[t._v("fn: 返回一个异步函数的函数")]),t._v(" "),a("li",[t._v("options:\n"),a("ol",[a("li",[t._v("lazy: 是否在解析 async 函数之前加载路由（默认为 false）,"),a("code",[t._v("useLazyAsyncData")]),t._v("是这个配置的语法糖写法")]),t._v(" "),a("li",[t._v("server:是否在服务器端获取数据（默认为 true）")]),t._v(" "),a("li",[a("em",[t._v("transform")]),t._v(": 获得结果后对结果进行转换")]),t._v(" "),a("li",[t._v("pick:提供一个数组，其中的值为接口返回数据中要包含的key（这样可以减少页面的内存消耗）")])])])]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("script setup")]),t._v("支持顶级await")])]),t._v(" "),a("h3",{attrs:{id:"usefetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usefetch"}},[t._v("#")]),t._v(" useFetch")]),t._v(" "),a("p",[t._v("相当于useAsyncData的语法糖，不用再写key了，可以通过"),a("code",[t._v("useAsyncData")]),t._v("和 和"),a("code",[t._v("$fetch")]),t._v("自动生成")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useFetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("参数：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("key")]),t._v(": Provide a custom key")]),t._v(" "),a("li",[t._v("Options from  "),a("a",{attrs:{href:"https://github.com/unjs/ohmyfetch",target:"_blank",rel:"noopener noreferrer"}},[t._v("ohmyfetch"),a("OutboundLink")],1),t._v(" "),a("ol",[a("li",[a("code",[t._v("method")]),t._v(": Request method")]),t._v(" "),a("li",[a("code",[t._v("params")]),t._v(": Query params")]),t._v(" "),a("li",[a("code",[t._v("baseURL")]),t._v(": Base URL for request")])])]),t._v(" "),a("li",[t._v("options中还支持useAsyncData中的options，同样提供语法糖写法："),a("code",[t._v("useLazyFetch")])])]),t._v(" "),a("h2",{attrs:{id:"state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[t._v("#")]),t._v(" State")]),t._v(" "),a("h3",{attrs:{id:"usestate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[t._v("#")]),t._v(" useState")]),t._v(" "),a("p",[t._v("创建全局共享的只读数据，只有在初始化时可以赋值。可以使用在page、component、plugin中,只能用在setup和生命周期钩子中")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("useState"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" init"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Ref"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("永远不要在 "),a("script",{attrs:{setup:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);