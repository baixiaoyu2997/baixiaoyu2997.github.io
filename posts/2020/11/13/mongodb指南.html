<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB指南 | L.Rain的博客</title>
    <meta name="generator" content="VuePress 1.5.4">
    <meta name="description" content="L.Rain的博客">
    <link rel="preload" href="/assets/css/0.styles.62d2b403.css" as="style"><link rel="preload" href="/assets/js/app.4c809c57.js" as="script"><link rel="preload" href="/assets/js/7.bc1fde9d.js" as="script"><link rel="preload" href="/assets/js/26.987f8954.js" as="script"><link rel="prefetch" href="/assets/js/1.001ca197.js"><link rel="prefetch" href="/assets/js/10.da37578a.js"><link rel="prefetch" href="/assets/js/11.0e2e3984.js"><link rel="prefetch" href="/assets/js/12.7231344e.js"><link rel="prefetch" href="/assets/js/13.321d6087.js"><link rel="prefetch" href="/assets/js/14.05c51bcb.js"><link rel="prefetch" href="/assets/js/15.ab843c1c.js"><link rel="prefetch" href="/assets/js/16.f3952733.js"><link rel="prefetch" href="/assets/js/17.3d19569c.js"><link rel="prefetch" href="/assets/js/18.7752e5cc.js"><link rel="prefetch" href="/assets/js/19.079c592f.js"><link rel="prefetch" href="/assets/js/20.e0559b7a.js"><link rel="prefetch" href="/assets/js/21.06ea538d.js"><link rel="prefetch" href="/assets/js/22.36ea18c9.js"><link rel="prefetch" href="/assets/js/23.c1fd3810.js"><link rel="prefetch" href="/assets/js/24.4c31312a.js"><link rel="prefetch" href="/assets/js/25.ec6ee1d4.js"><link rel="prefetch" href="/assets/js/27.718c3525.js"><link rel="prefetch" href="/assets/js/28.88e69ae8.js"><link rel="prefetch" href="/assets/js/29.97a6834a.js"><link rel="prefetch" href="/assets/js/3.decef8c9.js"><link rel="prefetch" href="/assets/js/30.abe9d0fe.js"><link rel="prefetch" href="/assets/js/31.2b51cfc1.js"><link rel="prefetch" href="/assets/js/32.70b6a3ca.js"><link rel="prefetch" href="/assets/js/33.50174b7b.js"><link rel="prefetch" href="/assets/js/34.40540b75.js"><link rel="prefetch" href="/assets/js/35.17f9ac55.js"><link rel="prefetch" href="/assets/js/36.1364337b.js"><link rel="prefetch" href="/assets/js/37.71934d6a.js"><link rel="prefetch" href="/assets/js/38.e28fc49e.js"><link rel="prefetch" href="/assets/js/39.fe2dad89.js"><link rel="prefetch" href="/assets/js/4.e31bdafd.js"><link rel="prefetch" href="/assets/js/40.2160b558.js"><link rel="prefetch" href="/assets/js/41.98ec2fd8.js"><link rel="prefetch" href="/assets/js/42.cb1aadb6.js"><link rel="prefetch" href="/assets/js/43.4a1bf1db.js"><link rel="prefetch" href="/assets/js/44.21490515.js"><link rel="prefetch" href="/assets/js/45.2a79a4ce.js"><link rel="prefetch" href="/assets/js/46.b3b38015.js"><link rel="prefetch" href="/assets/js/47.d1443973.js"><link rel="prefetch" href="/assets/js/48.57f2dbab.js"><link rel="prefetch" href="/assets/js/49.b7d86821.js"><link rel="prefetch" href="/assets/js/5.d8ce88b3.js"><link rel="prefetch" href="/assets/js/50.6e691113.js"><link rel="prefetch" href="/assets/js/51.54762014.js"><link rel="prefetch" href="/assets/js/52.6c43055e.js"><link rel="prefetch" href="/assets/js/53.906ee44e.js"><link rel="prefetch" href="/assets/js/54.c8a71e06.js"><link rel="prefetch" href="/assets/js/55.9ce0b3fe.js"><link rel="prefetch" href="/assets/js/56.e549cbc5.js"><link rel="prefetch" href="/assets/js/57.5c4e87db.js"><link rel="prefetch" href="/assets/js/58.dc385a24.js"><link rel="prefetch" href="/assets/js/59.648da9e5.js"><link rel="prefetch" href="/assets/js/6.15c09f13.js"><link rel="prefetch" href="/assets/js/60.de7af79b.js"><link rel="prefetch" href="/assets/js/61.a5bf8f40.js"><link rel="prefetch" href="/assets/js/62.caa8deec.js"><link rel="prefetch" href="/assets/js/63.f3ead28a.js"><link rel="prefetch" href="/assets/js/64.5357f405.js"><link rel="prefetch" href="/assets/js/65.467d09f8.js"><link rel="prefetch" href="/assets/js/66.b4595417.js"><link rel="prefetch" href="/assets/js/67.3c9fa582.js"><link rel="prefetch" href="/assets/js/68.1f2cc399.js"><link rel="prefetch" href="/assets/js/69.be7ce5e9.js"><link rel="prefetch" href="/assets/js/70.51f361a6.js"><link rel="prefetch" href="/assets/js/71.85949b29.js"><link rel="prefetch" href="/assets/js/72.92e27a74.js"><link rel="prefetch" href="/assets/js/73.a61c5d48.js"><link rel="prefetch" href="/assets/js/74.81c19b61.js"><link rel="prefetch" href="/assets/js/75.a5031d90.js"><link rel="prefetch" href="/assets/js/76.6507555b.js"><link rel="prefetch" href="/assets/js/77.88224ead.js"><link rel="prefetch" href="/assets/js/78.95b83a0d.js"><link rel="prefetch" href="/assets/js/79.f5460bd3.js"><link rel="prefetch" href="/assets/js/8.9eb39c35.js"><link rel="prefetch" href="/assets/js/80.cb98a891.js"><link rel="prefetch" href="/assets/js/81.7f784f56.js"><link rel="prefetch" href="/assets/js/82.7163e732.js"><link rel="prefetch" href="/assets/js/83.90ac87d2.js"><link rel="prefetch" href="/assets/js/84.9acdd4b7.js"><link rel="prefetch" href="/assets/js/85.104f8840.js"><link rel="prefetch" href="/assets/js/86.c7fda49c.js"><link rel="prefetch" href="/assets/js/9.21b6276e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.62d2b403.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(https://picsum.photos/1920/250.webp);" data-v-7a046aea><div data-v-e4145d0a data-v-7a046aea><nav class="navbar" data-v-e4145d0a><div class="container" data-v-e4145d0a><a href="/" class="router-link-active" data-v-e4145d0a><span class="navbar-site-name" data-v-e4145d0a>
          L.Rain的博客
        </span></a> <div class="navbar-toggler" data-v-e4145d0a><svg class="icon" style="font-size:1.2em;" data-v-e4145d0a data-v-e4145d0a><title data-v-e4145d0a data-v-e4145d0a>menu</title><use xlink:href="#icon-menu" data-v-e4145d0a data-v-e4145d0a></use></svg></div> <div class="navbar-links" data-v-e4145d0a><a href="/" class="navbar-link" data-v-e4145d0a>
            主页
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-e4145d0a>
            分类
          </a><a href="https://github.com/baixiaoyu2997" target="_blank" rel="noopener noreferrer" class="navbar-link" data-v-e4145d0a><span data-v-e4145d0a>Github</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-e4145d0a data-v-e4145d0a><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-e4145d0a></div></div> <div class="banner" data-v-98d6aa8c data-v-7a046aea data-v-7a046aea><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-7a046aea>
          MongoDB指南
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-4dd605a1 data-v-4dd605a1><main class="main" data-v-4dd605a1><div class="post" data-v-4dd605a1 data-v-4dd605a1><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2020-11-13
    </span> <span class="update-date" data-v-4e23451f>
      最后修改 : 2020-11-16
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/11/10/golang%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97.html" class="post-link" data-v-4e23451f>
      上一篇 : golang学习指南
    </a> <a href="/posts/2019/03/27/%E7%BD%91%E5%9D%80%E6%94%B6%E8%97%8F.html" class="post-link" data-v-4e23451f>
      下一篇 : 网址收藏
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><h1 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h1> <p>MongoDB 是非关系型数据库。</p> <p>MongoDB 的存储结构 以前我们的关系型数据库的数据结构都是顶层是库，库下面是表，表下面是数据。但是 MongoDB 有所不同，库下面是集合，集合下面是文档</p> <h2 id="下载"><a href="#下载" class="header-anchor">#</a> 下载</h2> <p>地址： https://www.mongodb.com/try/download/community</p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>参考官方文档：https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/#install-mongodb-community-edition</p> <p>安装完毕后，使用<code>mongod --config /usr/local/etc/mongod.conf --fork</code>命令启动,想要手动关闭使用命令<code>db.shutdownServer()</code></p> <p>如果成功了，那么会输出如下日志：</p> <div class="language-diff extra-class"><pre class="language-diff"><code>{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:31.986+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;CONTROL&quot;,  &quot;id&quot;:23285,   &quot;ctx&quot;:&quot;main&quot;,&quot;msg&quot;:&quot;Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'&quot;}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:31.991+08:00&quot;},&quot;s&quot;:&quot;W&quot;,  &quot;c&quot;:&quot;ASIO&quot;,     &quot;id&quot;:22601,   &quot;ctx&quot;:&quot;main&quot;,&quot;msg&quot;:&quot;No TransportLayer configured during NetworkInterface startup&quot;}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:31.991+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:4648602, &quot;ctx&quot;:&quot;main&quot;,&quot;msg&quot;:&quot;Implicit TCP FastOpen in use.&quot;}
<span class="token inserted-sign inserted">+ {&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:31.991+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:4615611, &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;MongoDB starting&quot;,&quot;attr&quot;:{&quot;pid&quot;:2926,&quot;port&quot;:27017,&quot;dbPath&quot;:&quot;/data/db&quot;,&quot;architecture&quot;:&quot;64-bit&quot;,&quot;host&quot;:&quot;2997&quot;}}
</span>{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:31.991+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;CONTROL&quot;,  &quot;id&quot;:23403,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Build Info&quot;,&quot;attr&quot;:{&quot;buildInfo&quot;:{&quot;version&quot;:&quot;4.4.1&quot;,&quot;gitVersion&quot;:&quot;ad91a93a5a31e175f5cbf8c69561e788bbc55ce1&quot;,&quot;modules&quot;:[],&quot;allocator&quot;:&quot;system&quot;,&quot;environment&quot;:{&quot;distarch&quot;:&quot;x86_64&quot;,&quot;target_arch&quot;:&quot;x86_64&quot;}}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:31.991+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;CONTROL&quot;,  &quot;id&quot;:51765,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Operating System&quot;,&quot;attr&quot;:{&quot;os&quot;:{&quot;name&quot;:&quot;Mac OS X&quot;,&quot;version&quot;:&quot;19.6.0&quot;}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.000+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;CONTROL&quot;,  &quot;id&quot;:21951,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Options set by command line&quot;,&quot;attr&quot;:{&quot;options&quot;:{}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.006+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:22315,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Opening WiredTiger&quot;,&quot;attr&quot;:{&quot;config&quot;:&quot;create,cache_size=7680M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.539+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:22430,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;WiredTiger message&quot;,&quot;attr&quot;:{&quot;message&quot;:&quot;[1605248552:539974][2926:0x116f06dc0], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.540+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:22430,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;WiredTiger message&quot;,&quot;attr&quot;:{&quot;message&quot;:&quot;[1605248552:540061][2926:0x116f06dc0], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.585+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:4795906, &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;WiredTiger opened&quot;,&quot;attr&quot;:{&quot;durationMillis&quot;:579}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.585+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;RECOVERY&quot;, &quot;id&quot;:23987,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;WiredTiger recoveryTimestamp&quot;,&quot;attr&quot;:{&quot;recoveryTimestamp&quot;:{&quot;$timestamp&quot;:{&quot;t&quot;:0,&quot;i&quot;:0}}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.626+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:22262,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Timestamp monitor starting&quot;}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.627+08:00&quot;},&quot;s&quot;:&quot;W&quot;,  &quot;c&quot;:&quot;CONTROL&quot;,  &quot;id&quot;:22120,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Access control is not enabled for the database. Read and write access to data and configuration is unrestricted&quot;,&quot;tags&quot;:[&quot;startupWarnings&quot;]}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.627+08:00&quot;},&quot;s&quot;:&quot;W&quot;,  &quot;c&quot;:&quot;CONTROL&quot;,  &quot;id&quot;:22140,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;This server is bound to localhost. Remote systems will be unable to connect to this server. Start the server with --bind_ip &lt;address&gt; to specify which IP addresses it should serve responses from, or with --bind_ip_all to bind to all interfaces. If this behavior is desired, start the server with --bind_ip 127.0.0.1 to disable this warning&quot;,&quot;tags&quot;:[&quot;startupWarnings&quot;]}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.627+08:00&quot;},&quot;s&quot;:&quot;W&quot;,  &quot;c&quot;:&quot;CONTROL&quot;,  &quot;id&quot;:22184,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Soft rlimits too low&quot;,&quot;attr&quot;:{&quot;currentValue&quot;:8192,&quot;recommendedMinimum&quot;:64000},&quot;tags&quot;:[&quot;startupWarnings&quot;]}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.631+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:20320,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;createCollection&quot;,&quot;attr&quot;:{&quot;namespace&quot;:&quot;admin.system.version&quot;,&quot;uuidDisposition&quot;:&quot;provided&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;6d53eaa2-0afd-4322-aa09-15203edca039&quot;}},&quot;options&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;6d53eaa2-0afd-4322-aa09-15203edca039&quot;}}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.677+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;INDEX&quot;,    &quot;id&quot;:20345,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Index build: done building&quot;,&quot;attr&quot;:{&quot;buildUUID&quot;:null,&quot;namespace&quot;:&quot;admin.system.version&quot;,&quot;index&quot;:&quot;_id_&quot;,&quot;commitTimestamp&quot;:{&quot;$timestamp&quot;:{&quot;t&quot;:0,&quot;i&quot;:0}}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.679+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;COMMAND&quot;,  &quot;id&quot;:20459,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Setting featureCompatibilityVersion&quot;,&quot;attr&quot;:{&quot;newVersion&quot;:&quot;4.4&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.680+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:20536,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Flow Control is enabled on this deployment&quot;}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.682+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:20320,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;createCollection&quot;,&quot;attr&quot;:{&quot;namespace&quot;:&quot;local.startup_log&quot;,&quot;uuidDisposition&quot;:&quot;generated&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;e1c9416f-df99-4ab4-8566-618b90fed819&quot;}},&quot;options&quot;:{&quot;capped&quot;:true,&quot;size&quot;:10485760}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.718+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;INDEX&quot;,    &quot;id&quot;:20345,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Index build: done building&quot;,&quot;attr&quot;:{&quot;buildUUID&quot;:null,&quot;namespace&quot;:&quot;local.startup_log&quot;,&quot;index&quot;:&quot;_id_&quot;,&quot;commitTimestamp&quot;:{&quot;$timestamp&quot;:{&quot;t&quot;:0,&quot;i&quot;:0}}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.718+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;FTDC&quot;,     &quot;id&quot;:20625,   &quot;ctx&quot;:&quot;initandlisten&quot;,&quot;msg&quot;:&quot;Initializing full-time diagnostic data capture&quot;,&quot;attr&quot;:{&quot;dataDirectory&quot;:&quot;/data/db/diagnostic.data&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.720+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:23015,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Listening on&quot;,&quot;attr&quot;:{&quot;address&quot;:&quot;/tmp/mongodb-27017.sock&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.720+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:23015,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Listening on&quot;,&quot;attr&quot;:{&quot;address&quot;:&quot;127.0.0.1&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.720+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:23016,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Waiting for connections&quot;,&quot;attr&quot;:{&quot;port&quot;:27017,&quot;ssl&quot;:&quot;off&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.722+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;CONTROL&quot;,  &quot;id&quot;:20712,   &quot;ctx&quot;:&quot;LogicalSessionCacheReap&quot;,&quot;msg&quot;:&quot;Sessions collection is not set up; waiting until next sessions reap interval&quot;,&quot;attr&quot;:{&quot;error&quot;:&quot;NamespaceNotFound: config.system.sessions does not exist&quot;}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.722+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:20320,   &quot;ctx&quot;:&quot;LogicalSessionCacheRefresh&quot;,&quot;msg&quot;:&quot;createCollection&quot;,&quot;attr&quot;:{&quot;namespace&quot;:&quot;config.system.sessions&quot;,&quot;uuidDisposition&quot;:&quot;generated&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;f33a4f9e-c6ea-439d-a042-89ef5c27a705&quot;}},&quot;options&quot;:{}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.782+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;INDEX&quot;,    &quot;id&quot;:20345,   &quot;ctx&quot;:&quot;LogicalSessionCacheRefresh&quot;,&quot;msg&quot;:&quot;Index build: done building&quot;,&quot;attr&quot;:{&quot;buildUUID&quot;:null,&quot;namespace&quot;:&quot;config.system.sessions&quot;,&quot;index&quot;:&quot;_id_&quot;,&quot;commitTimestamp&quot;:{&quot;$timestamp&quot;:{&quot;t&quot;:0,&quot;i&quot;:0}}}}
{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-11-13T14:22:32.782+08:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;INDEX&quot;,    &quot;id&quot;:20345,   &quot;ctx&quot;:&quot;LogicalSessionCacheRefresh&quot;,&quot;msg&quot;:&quot;Index build: done building&quot;,&quot;attr&quot;:{&quot;buildUUID&quot;:null,&quot;namespace&quot;:&quot;config.system.sessions&quot;,&quot;index&quot;:&quot;lsidTTLIndex&quot;,&quot;commitTimestamp&quot;:{&quot;$timestamp&quot;:{&quot;t&quot;:0,&quot;i&quot;:0}}}}
</code></pre></div><p>代码高亮部分显示服务启动在端口<code>27017</code>上</p> <h3 id="连接数据库"><a href="#连接数据库" class="header-anchor">#</a> 连接数据库</h3> <p>现在数据库已经启动了，我们可以通过新打开一个命令行来对其操控：</p> <div class="language- extra-class"><pre class="language-text"><code>$ mongo
&gt; show dbs
admin 0.000GB
config 0.000GB
local 0.000GB
&gt; db.version()
4.4.1
</code></pre></div><h3 id="可执行文件"><a href="#可执行文件" class="header-anchor">#</a> 可执行文件</h3> <p>通过 shell 可以运行命令，但是太过于麻烦，<code>mongo</code>可以执行 js 文件（对的，你没看错，越来越像 node 了）,编写 js 文件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// goTask.js</span>
<span class="token keyword">const</span> userName <span class="token operator">=</span> <span class="token string">&quot;L.Rain&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> timeStamp <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> jsonDdatabase <span class="token operator">=</span> <span class="token punctuation">{</span> loginUnser<span class="token operator">:</span> userName<span class="token punctuation">,</span> loginTime<span class="token operator">:</span> timeStamp <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>login<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>jsonDdatabase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;[demo]log pritn success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用 mongo 调用：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>mongo goTask.js
</code></pre></div><h4 id="连接数据库-2"><a href="#连接数据库-2" class="header-anchor">#</a> 连接数据库</h4> <p>在<code>js</code>文件中需要使用<code>connect(db)</code>来连接到指定数据库,如果指定的数据库不存在，则创建该数据库：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;company&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="mongo-shell"><a href="#mongo-shell" class="header-anchor">#</a> mongo shell</h2> <blockquote><p>https://docs.mongodb.com/manual/reference/method/ &gt; https://docs.mongodb.com/manual/reference/command/nav-administration/</p></blockquote> <ul><li>show dbs:显示已有数据库，默认会有<code>admin、config、local</code>，这些名字是不允许使用的</li> <li><code>use &lt;db&gt;</code>: 进入数据库，如果该数据库不存在则新建。</li> <li>show collections:显示数据库中的集合（关系型中叫表）</li> <li>db: 显示当前所在数据库,当刚从<code>mongo</code>命令进入时，默认应该返回<code>test</code></li> <li>load: 执行 已存在 js 文件并</li> <li><code>mongod --auth</code>:使用账户密码登陆，再次登录时需要使用<code>mongo -u &lt;用户名&gt; -p &lt;密码&gt; &lt;ip:port&gt;/admin</code>的形式才能登录。</li></ul> <h3 id="换行"><a href="#换行" class="header-anchor">#</a> 换行</h3> <blockquote><p>https://docs.mongodb.com/manual/mongo/#multi-line-operations-in-the-mongo-shell</p></blockquote> <p>如果第一行是以<code>(</code>或者<code>{</code>或者<code>[</code>那么回车就会出现换行</p> <h2 id="最佳实践"><a href="#最佳实践" class="header-anchor">#</a> 最佳实践</h2> <h3 id="批量插入性能"><a href="#批量插入性能" class="header-anchor">#</a> 批量插入性能</h3> <p>循环单个插入和批量一次插入，速度会差很多，优先使用批量插入。</p> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <h3 id="address-already-in-use"><a href="#address-already-in-use" class="header-anchor">#</a> Address already in use</h3> <p>说明端口已经被占用，可以使用另外一个端口：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>mongod --port <span class="token number">27018</span>
</code></pre></div><p>或者杀掉所有 mongod 进程：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">killall</span> mongod
</code></pre></div><h3 id="attempted-to-create-a-lock-file-on-a-read-only-directory-data-db"><a href="#attempted-to-create-a-lock-file-on-a-read-only-directory-data-db" class="header-anchor">#</a> Attempted to create a lock file on a read-only directory: /data/db</h3> <p>导致这个问题的原因是该文件夹的用户权限问题，检查该目录的所属：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /data/
<span class="token function">ls</span> -l
</code></pre></div><p>发现输出是<code>root</code>,不是当前用户，所以修改成当前用户就 ok 了：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">chown</span> -R xxx /data/db/
</code></pre></div><h1 id="api"><a href="#api" class="header-anchor">#</a> API</h1> <h2 id="database-methods"><a href="#database-methods" class="header-anchor">#</a> Database Methods</h2> <h3 id="db-auth"><a href="#db-auth" class="header-anchor">#</a> db.auth(<username>, <password>)</password></username></h3> <p>用户建权，建权成功返回1，失败返回0</p> <h3 id="db-createuser-user-writeconcern"><a href="#db-createuser-user-writeconcern" class="header-anchor">#</a> db.createUser(user,writeConcern)</h3> <p>数据库创建用户。</p> <p>参数user：</p> <div class="language- extra-class"><pre class="language-text"><code>{
  user: &quot;&lt;name&gt;&quot;,
  pwd: passwordPrompt(),      // Or  &quot;&lt;cleartext password&gt;&quot;
  customData: { &lt;any information&gt; },
  roles: [
    { role: &quot;&lt;role&gt;&quot;, db: &quot;&lt;database&gt;&quot; } | &quot;&lt;role&gt;&quot;,
    ...
  ],
  authenticationRestrictions: [
     {
       clientSource: [&quot;&lt;IP&gt;&quot; | &quot;&lt;CIDR range&gt;&quot;, ...],
       serverAddress: [&quot;&lt;IP&gt;&quot; | &quot;&lt;CIDR range&gt;&quot;, ...]
     },
     ...
  ],
  mechanisms: [ &quot;&lt;SCRAM-SHA-1|SCRAM-SHA-256&gt;&quot;, ... ],
  passwordDigestor: &quot;&lt;server|client&gt;&quot;
}
</code></pre></div><p>其中<code>&lt;role&gt;</code>的内置可选值为：</p> <ol><li>数据库用户角色：read、readWrite；</li> <li>数据库管理角色：dbAdmin、dbOwner、userAdmin;</li> <li>集群管理角色：clusterAdmin、clusterManager、clusterMonitor、hostManage；</li> <li>备份恢复角色：backup、restore；</li> <li>所有数据库角色：readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase</li> <li>超级用户角色：root</li> <li>内部角色：__system</li></ol> <h3 id="db-dropdatabase"><a href="#db-dropdatabase" class="header-anchor">#</a> db.dropDatabase()</h3> <p>删除当前数据库</p> <h3 id="db-runcommand"><a href="#db-runcommand" class="header-anchor">#</a> db.runCommand()</h3> <p>提供帮助程序以运行指定的数据库命令。这是发出数据库命令的首选方法，因为它在 shell 和程序之间提供了一致的接口。</p> <h2 id="collection-methods-集合"><a href="#collection-methods-集合" class="header-anchor">#</a> collection Methods(集合)</h2> <p>在对数据进行修改的时候不能只修改对应的属性，应该返回整个新的文档。</p> <h3 id="db-collection-insert"><a href="#db-collection-insert" class="header-anchor">#</a> db.collection.insert</h3> <p>插入数据，当集合不存在时，新建集合,注意一次插入不要超过 48M，向.zip 和大图片什么的尽量用静态存储，MongoDB 存储静态路径就好，这也算是一个规则。</p> <h3 id="db-collection-remove"><a href="#db-collection-remove" class="header-anchor">#</a> db.collection.remove</h3> <p>第一个参数是查询，第二个参数是选项是否只删除一个。</p> <h3 id="db-collection-drop"><a href="#db-collection-drop" class="header-anchor">#</a> db.collection.drop</h3> <p>清空当前集合</p> <h3 id="db-collection-update"><a href="#db-collection-update" class="header-anchor">#</a> db.collection.update</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">update</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span>update<span class="token punctuation">,</span> <span class="token punctuation">{</span>upsert<span class="token operator">:</span><span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span><span class="token punctuation">,</span>multi<span class="token operator">:</span> <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span><span class="token punctuation">,</span>writeConcern<span class="token operator">:</span> <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span><span class="token punctuation">,</span>collation<span class="token operator">:</span> <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span><span class="token punctuation">,</span> arrayFilters<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>filterdocument1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>hint<span class="token operator">:</span> <span class="token operator">&lt;</span>document <span class="token operator">|</span> string<span class="token operator">&gt;</span><span class="token comment">// Available starting in MongoDB 4.2})</span>
</code></pre></div><p>修改文档，,query 为查询，update 参数为修改为，options：</p> <ul><li>multi 为 true 时，修改所有匹配的文档，默认值为 false</li> <li>upsert 为 true 时，如果不存在该数据，则插入该条数据，默认值为 false</li></ul> <h3 id="db-collection-findandmodify"><a href="#db-collection-findandmodify" class="header-anchor">#</a> db.collection.findAndModify</h3> <p>修改并返回文档，平时工作中更多是用这个方法来进行数据库的修改，因为有返回状态，虽然性能没有直接使用命令快，但是更安全。<br>
参数：</p> <div class="language- extra-class"><pre class="language-text"><code>db.collection.findAndModify({
    query: &lt;document&gt;, // 需要查询的条件/文档
    sort: &lt;document&gt;,  // 进行排序
    remove: &lt;boolean&gt;,
    update: &lt;document or aggregation pipeline&gt;, // Changed in MongoDB 4.2
    new: &lt;boolean&gt;, // 是否返回修改后文档
    fields: &lt;document&gt;, // 需要返回的字段
    upsert: &lt;boolean&gt;,  // 没有要修改的值时是否新增这个值
    bypassDocumentValidation: &lt;boolean&gt;,
    writeConcern: &lt;document&gt;,
    collation: &lt;document&gt;,
    arrayFilters: [ &lt;filterdocument1&gt;, ... ]
});
</code></pre></div><p>例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myModify <span class="token operator">=</span> <span class="token punctuation">{</span>
  findAndModify<span class="token operator">:</span> <span class="token string">&quot;workmate&quot;</span><span class="token punctuation">,</span>
  query<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;JSPang&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  update<span class="token operator">:</span> <span class="token punctuation">{</span> $<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//更新完成，需要查看结果，如果为false不进行查看结果</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ResultMessage <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">runCommand</span><span class="token punctuation">(</span>myModify<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printjson</span><span class="token punctuation">(</span>ResultMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="db-collection-find"><a href="#db-collection-find" class="header-anchor">#</a> db.collection.find</h3> <p>参数：</p> <ul><li>query, 查询参数,如果参数为{}则返回所有
<ul><li>如果查询数组，那么使用<code>[]</code>则精确查询，例如：<code>{interest:['看电影']}</code>,如果使用字符串，则为查询包含该值的数据，例如：<code>{interest:'看电影'}</code></li></ul></li> <li>projection，要返回的字段，不传递参数则全部返回，设置参数后默认返回<code>_id</code> <ul><li>取消默认返回<code>_id</code>，可以添加参数<code>{_id:false}</code>,值也可以是<code>0或1</code>,例如：<code>{name:true,&quot;skill.skillOne&quot;:true,_id:false}</code>
返回：</li></ul></li> <li>cursor游标,可以使用游标的方法来对返回做处理</li></ul> <p>对返回游标进行遍历：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;company&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//进行链接对应的集合collections</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//声明变量result，并把查询结果赋值给result</span>
<span class="token comment">//利用游标的hasNext()进行循环输出结果。</span>
result<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">printjson</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="db-collection-findone"><a href="#db-collection-findone" class="header-anchor">#</a> db.collection.findOne</h3> <p>查找第一个</p> <h3 id="db-collection-createindex-keys-options-commitquorum"><a href="#db-collection-createindex-keys-options-commitquorum" class="header-anchor">#</a> db.collection.createIndex(keys, options, commitQuorum)</h3> <p>为数据建立索引。索引是特殊的数据结构，索引存储在一个易于遍历读取的数据集合中，索引是对数据库表中一列或多列的值进行排序的一种结构。无论是在关系型数据库还是文档数据库，建立索引都是非常重要的。索引会消耗硬盘和内存资源，所以还是要根据程序需要进行建立。MongoDB也给我们进行了限制，只允许我们建立64个索引值。</p> <p>参数：</p> <ul><li>keys表示需要建立所以的属性，例如：<code>{text:1}</code>,值为1表示升序，值为-1表示降序</li> <li>options</li></ul> <p>索引中的问题：</p> <ul><li>数据不超万条时，不需要使用索引。性能的提升并不明显，而大大增加了内存和硬盘的消耗。</li> <li>查询数据超过表数据量30%时，不要使用索引字段查询。实际证明会比不使用索引更慢，因为它大量检索了索引表和我们原表。</li> <li>数字索引（即值为数字的key），要比字符串索引快的多，在百万级甚至千万级数据量面前，使用数字索引是个明确的选择。</li> <li>把你经常查询的数据做成一个内嵌数据（对象型的数据），然后集体进行索引。</li></ul> <p>复合索引：在find中使用多个建立索引的key时，按照建立getIndexes()中的顺序查找。</p> <p>全文索引：</p> <ul><li>key值为text则创建全文索引：<code>db.info.createIndex({textContent:'text'})</code></li> <li>搜索全文索引：<code>db.info.find({$text:{$search:&quot;programmer&quot;}})</code>,使用$text表示使用全文索引搜索
<ul><li>查找多个词：<code>db.info.find({$text:{$search:&quot;programmer family diary drink&quot;}})</code>,搜索出来的结果是<code>或</code>的关系,会把包含这些字的数据都查出来，</li> <li>如果不想查带有<code>drink</code>文字的数据，那么使用<code>-</code>表示：<code>db.info.find({$text:{$search:&quot;programmer family diary -drink&quot;}})</code></li> <li>查找带有空格的词语,使用转义符：<code>db.info.find({$text:{$search:&quot;\&quot;love PlayGame\&quot; drink&quot;}})</code></li></ul></li></ul> <h3 id="db-collection-getindexes"><a href="#db-collection-getindexes" class="header-anchor">#</a> db.collection.getIndexes()</h3> <p>查看现有索引</p> <h3 id="db-collection-dropindex-index"><a href="#db-collection-dropindex-index" class="header-anchor">#</a> db.collection.dropIndex(index)</h3> <p>删除索引，参数为索引name或者索引key值：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token string">'catIdx'</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;cat&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="操作符"><a href="#操作符" class="header-anchor">#</a> 操作符</h2> <p>https://docs.mongodb.com/manual/reference/operator/update/</p> <h3 id="set"><a href="#set" class="header-anchor">#</a> $set</h3> <p>用<code>$set</code>操作符就可以实现单独新增、修改属性：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;MinJie&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> $<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span> sex<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">21</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果嵌套文档可以是用属性的形式进行修改：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;MinJie&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> $<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;skill.skillThree&quot;</span><span class="token operator">:</span> <span class="token string">&quot;word&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>修改数组时，如果不知道具体值，只知道位置，可以通过 index 修改：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;xiaoWang&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> $<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;interest.2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Code&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="unset"><a href="#unset" class="header-anchor">#</a> $unset</h3> <p>使用<code>$unset</code>可以删除键值对：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;MinJie&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> $unset<span class="token operator">:</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inc"><a href="#inc" class="header-anchor">#</a> $inc</h3> <p>对数字进行计算：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;MinJie&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> $inc<span class="token operator">:</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="push"><a href="#push" class="header-anchor">#</a> $push</h3> <p>对数组文档进行操作，如果该数组不存在则创建新数组，如果修改属性不为数组，则什么都不做。支持内嵌属性格式。</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;MinJie&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> $push<span class="token operator">:</span> <span class="token punctuation">{</span> interest<span class="token operator">:</span> <span class="token string">&quot;draw&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="addtoset"><a href="#addtoset" class="header-anchor">#</a> $addToSet</h3> <p>相当于<code>&lt;update&gt;</code>版的$ne，平时更多是使用$addToSet 而不是$ne</p> <h3 id="pop"><a href="#pop" class="header-anchor">#</a> $pop</h3> <p>删除数组的起始值或者末尾值，根据参数决定</p> <ul><li>1:从数组末端删除</li> <li>-1:从数组开头删除</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;xiaoWang&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> $pop<span class="token operator">:</span> <span class="token punctuation">{</span> interest<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="in"><a href="#in" class="header-anchor">#</a> $in</h3> <p>用于搜索一键多值，值为数组形式，值满足其中一项即可，比如搜索同事中年龄是 25 岁或 33 岁的信息：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token punctuation">{</span> $<span class="token keyword">in</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;skill.skillOne&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> _id<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="nin"><a href="#nin" class="header-anchor">#</a> $nin</h3> <p>与$in 相反，匹配 值不等于输入的文档</p> <h3 id="or"><a href="#or" class="header-anchor">#</a> $or</h3> <p>查询多个键值，与$in不同的是，$in 是用来查询等于，$or 可以进行比较查询：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> $or<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token punctuation">{</span> $gte<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&quot;skill.skillThree&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PHP&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;skill.skillThree&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> _id<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="nor"><a href="#nor" class="header-anchor">#</a> $nor</h3> <p>与$or 相反</p> <h3 id="and"><a href="#and" class="header-anchor">#</a> $and</h3> <p>用来查找几个 key 值都满足的情况,语法同$or</p> <h3 id="not"><a href="#not" class="header-anchor">#</a> $not</h3> <p>它用来查询除条件之外的值，比如我们现在要查找除年龄大于 20 岁，小于 30 岁的人员信。</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token punctuation">{</span>
      $not<span class="token operator">:</span> <span class="token punctuation">{</span>
        $lte<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
        $gte<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;skill.skillOne&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> _id<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="all"><a href="#all" class="header-anchor">#</a> $all</h3> <p>用于数组多项查询,需要满足所有条件：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> interest<span class="token operator">:</span> <span class="token punctuation">{</span> $all<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;看电影&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;看书&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> interest<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> _id<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="size"><a href="#size" class="header-anchor">#</a> $size</h3> <p>根据数组的长度查询出结果。</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> interest<span class="token operator">:</span> <span class="token punctuation">{</span> $size<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> interest<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> _id<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="where"><a href="#where" class="header-anchor">#</a> $where</h3> <p>它可以让我们在条件里使用js的方法来进行复杂查询：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>$where<span class="token operator">:</span><span class="token string">&quot;this.age&gt;30&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>_id<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p>this指向workmate集合本身，虽然强大和灵活，但是这种查询对于数据库的压力和安全性都会变重，不推荐使用。</p> <h2 id="projection操作符"><a href="#projection操作符" class="header-anchor">#</a> Projection操作符</h2> <blockquote><p>用于对返回数据进行操作</p></blockquote> <h3 id="slice"><a href="#slice" class="header-anchor">#</a> $slice</h3> <p>指定返回数据的长度：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>interest<span class="token operator">:</span><span class="token punctuation">{</span>$slice<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>_id<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span> 
<span class="token punctuation">)</span>
</code></pre></div><h2 id="cursor游标"><a href="#cursor游标" class="header-anchor">#</a> cursor游标</h2> <h3 id="cursor-limit-number"><a href="#cursor-limit-number" class="header-anchor">#</a> cursor.limit(number)</h3> <p>控制返回值数量，参数为0时不做限制。此方法对分页有用。</p> <h3 id="cursor-skip-number"><a href="#cursor-skip-number" class="header-anchor">#</a> cursor.skip(number)</h3> <p>指定从何处开始返回结果，此方法对分页有用。</p> <h3 id="cursor-sort"><a href="#cursor-sort" class="header-anchor">#</a> cursor.sort(<document>)</document></h3> <p>对返回值排序，可以指定属性按照升序还是降序排序,升序值为1，降序为-1：</p> <div class="language- extra-class"><pre class="language-text"><code>db.users.find({ }).sort( { age : -1, posts: 1 } )
</code></pre></div><h3 id="cursor-hasnext"><a href="#cursor-hasnext" class="header-anchor">#</a> cursor.hasNext()</h3> <p>如果db.collection.find()查询返回的游标可以进一步迭代以返回更多文档，则返回true。<br>
使用while遍历:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> db <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;company&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//进行链接对应的集合collections</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//声明变量result，并把查询结果赋值给result</span>
<span class="token comment">//利用游标的hasNext()进行循环输出结果。</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">printjson</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">//用json格式打印结果</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="cursor-hint-index"><a href="#cursor-hint-index" class="header-anchor">#</a> cursor.hint(index)</h3> <p>调用此方法来覆盖默认的索引顺序：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用randNum0进行索引查找</span>
db<span class="token punctuation">.</span>randomInfo<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>usename<span class="token operator">:</span><span class="token string">'zkcvjlsdkfjslf'</span><span class="token punctuation">,</span>randNum0<span class="token operator">:</span><span class="token number">908274</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hint</span><span class="token punctuation">(</span><span class="token punctuation">{</span>randNum0<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre></div><h2 id="修饰符"><a href="#修饰符" class="header-anchor">#</a> 修饰符</h2> <blockquote><p>比较大小可用于数字格式、时间格式</p></blockquote> <h3 id="each"><a href="#each" class="header-anchor">#</a> $each</h3> <p>批量操作，可与<code>$addToSet</code>和<code>$push</code>一起使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> newInterset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Sing&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Dance&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Code&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;xiaoWang&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> $addToSet<span class="token operator">:</span> <span class="token punctuation">{</span> interest<span class="token operator">:</span> <span class="token punctuation">{</span> $each<span class="token operator">:</span> newInterset <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="lt"><a href="#lt" class="header-anchor">#</a> $lt</h3> <p>小于，全称<code>less-than</code></p> <h3 id="lte"><a href="#lte" class="header-anchor">#</a> lte</h3> <p>小于等于，英文全称<code>less-than-equal</code></p> <h3 id="gt"><a href="#gt" class="header-anchor">#</a> $gt</h3> <p>大于，英文全称<code>greater-than</code></p> <h3 id="gte"><a href="#gte" class="header-anchor">#</a> $gte</h3> <p>大于等于，英文全称<code>greater-than-equal</code></p> <h3 id="ne"><a href="#ne" class="header-anchor">#</a> $ne</h3> <p>不等于，$ne 用于<code>&lt;query&gt;</code>，查找是否不存在值。</p> <p>当用于对象时，判断的值应为整个对象：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;MinJie&quot;</span><span class="token punctuation">,</span>
    skill<span class="token operator">:</span> <span class="token punctuation">{</span>
      $ne<span class="token operator">:</span> <span class="token punctuation">{</span>
        skillOne<span class="token operator">:</span> <span class="token string">&quot;PhotoShop&quot;</span><span class="token punctuation">,</span>
        SkillTwo<span class="token operator">:</span> <span class="token string">&quot;UI&quot;</span><span class="token punctuation">,</span>
        SkillThree<span class="token operator">:</span> <span class="token string">&quot;Word+Excel+PPT&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> $push<span class="token operator">:</span> <span class="token punctuation">{</span> interest<span class="token operator">:</span> <span class="token string">&quot;talk4&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当用于数组时，判断是否包括该值：</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>workmate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;xiaoWang&quot;</span><span class="token punctuation">,</span> interest<span class="token operator">:</span> <span class="token punctuation">{</span> $ne<span class="token operator">:</span> <span class="token string">&quot;playGame&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> $push<span class="token operator">:</span> <span class="token punctuation">{</span> interest<span class="token operator">:</span> <span class="token string">&quot;Game&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2020-11-13
    </span> <span class="update-date" data-v-4e23451f>
      最后修改 : 2020-11-16
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/11/10/golang%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97.html" class="post-link" data-v-4e23451f>
      上一篇 : golang学习指南
    </a> <a href="/posts/2019/03/27/%E7%BD%91%E5%9D%80%E6%94%B6%E8%97%8F.html" class="post-link" data-v-4e23451f>
      下一篇 : 网址收藏
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-4dd605a1><div class="info-card main-div" data-v-9d847660 data-v-4dd605a1><div class="info-card-header" data-v-9d847660><img src="https://blog-pic.oss-cn-beijing.aliyuncs.com/avatar.webp" alt="L.Rain" class="info-avatar" data-v-9d847660></div> <div class="info-card-body" data-v-9d847660><section class="info-nickname" data-v-9d847660>
      L.Rain
    </section> <section class="info-desc" data-v-9d847660>真实、自由、宽容</section> <section class="info-contact" data-v-9d847660><section data-v-9d847660><span title="ChengDu City, China" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>ChengDu City, China</title><use xlink:href="#icon-location" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          ChengDu City, China
        </span></span></section> <section data-v-9d847660><span title="ChengDu YeeYun Technology" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>ChengDu YeeYun Technology</title><use xlink:href="#icon-organization" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          ChengDu YeeYun Technology
        </span></span></section> <section data-v-9d847660><a href="mailto:bxy2997@sina.com" title="bxy2997@sina.com" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>bxy2997@sina.com</title><use xlink:href="#icon-email" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          bxy2997@sina.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-9d847660><section class="info-sns clearfix" data-v-9d847660><a href="https://github.com/baixiaoyu2997" target="_blank" class="sns-link" data-v-9d847660><span title="GitHub: L.Rain" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>GitHub: L.Rain</title><use xlink:href="#icon-github" data-v-9d847660 data-v-9d847660></use></svg></span></a><a href="https://weibo.com/1504398495" target="_blank" class="sns-link" data-v-9d847660><span title="新浪微博: 白晓宇V" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>新浪微博: 白晓宇V</title><use xlink:href="#icon-weibo" data-v-9d847660 data-v-9d847660></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-4dd605a1><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>文章目录</span> <div class="post-nav-toc"><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#下载">下载</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#安装">安装</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#连接数据库">连接数据库</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#可执行文件">可执行文件</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#mongo-shell">mongo shell</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#换行">换行</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#最佳实践">最佳实践</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#批量插入性能">批量插入性能</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#问题">问题</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#address-already-in-use">Address already in use</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#attempted-to-create-a-lock-file-on-a-read-only-directory-data-db">Attempted to create a lock file on a read-only directory: /data/db</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#database-methods">Database Methods</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-auth">db.auth()</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-createuser-user-writeconcern">db.createUser(user,writeConcern)</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-dropdatabase">db.dropDatabase()</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-runcommand">db.runCommand()</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#collection-methods-集合">collection Methods(集合)</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-insert">db.collection.insert</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-remove">db.collection.remove</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-drop">db.collection.drop</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-update">db.collection.update</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-findandmodify">db.collection.findAndModify</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-find">db.collection.find</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-findone">db.collection.findOne</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-createindex-keys-options-commitquorum">db.collection.createIndex(keys, options, commitQuorum)</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-getindexes">db.collection.getIndexes()</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#db-collection-dropindex-index">db.collection.dropIndex(index)</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#操作符">操作符</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#set">\$set</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#unset">\$unset</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#inc">\$inc</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#push">\$push</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#addtoset">\$addToSet</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#pop">\$pop</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#in">\$in</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#nin">\$nin</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#or">\$or</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#nor">\$nor</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#and">\$and</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#not">\$not</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#all">\$all</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#size">\$size</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#where">$where</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#projection操作符">Projection操作符</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#slice">$slice</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#cursor游标">cursor游标</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#cursor-limit-number">cursor.limit(number)</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#cursor-skip-number">cursor.skip(number)</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#cursor-sort">cursor.sort()</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#cursor-hasnext">cursor.hasNext()</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#cursor-hint-index">cursor.hint(index)</a></li></ul></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#修饰符">修饰符</a><ul><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#each">\$each</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#lt">\$lt</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#lte">lte</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#gt">\$gt</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#gte">\$gte</a></li><li><a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#ne">\$ne</a></li></ul></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2020/11/13/mongodb%E6%8C%87%E5%8D%97.html#post-comments">
      评论
    </a></div></div></aside></div> <footer class="footer" data-v-1375e54c><p class="footer-sns-links" data-v-1375e54c><a href="https://github.com/baixiaoyu2997" target="_blank" class="sns-link" data-v-1375e54c><span title="GitHub: L.Rain" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>GitHub: L.Rain</title><use xlink:href="#icon-github" data-v-1375e54c data-v-1375e54c></use></svg></span></a><a href="https://weibo.com/1504398495" target="_blank" class="sns-link" data-v-1375e54c><span title="新浪微博: 白晓宇V" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>新浪微博: 白晓宇V</title><use xlink:href="#icon-weibo" data-v-1375e54c data-v-1375e54c></use></svg></span></a></p> <p class="footer-text" data-v-1375e54c><span data-v-1375e54c>Powered by </span> <a href="https://github.com/vuejs/vuepress" target="_blank" data-v-1375e54c>
      VuePress
    </a> <span data-v-1375e54c> | </span> <a href="https://github.com/meteorlxy/vuepress-theme-meteorlxy" target="_blank" data-v-1375e54c>
        meteorlxy
      </a></p> <!----></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.4c809c57.js" defer></script><script src="/assets/js/7.bc1fde9d.js" defer></script><script src="/assets/js/26.987f8954.js" defer></script>
  </body>
</html>
